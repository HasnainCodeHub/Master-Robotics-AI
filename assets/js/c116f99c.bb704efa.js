"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7889],{7316(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"capstone/chapter-1-system-architecture","title":"Chapter 1: System Architecture","description":"Chapter Goal","source":"@site/docs/capstone/chapter-1-system-architecture.md","sourceDirName":"capstone","slug":"/capstone/chapter-1-system-architecture","permalink":"/Master-Robotics-AI/textbook/capstone/chapter-1-system-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/HasnainCodeHub/Master-Robotics-AI/tree/main/docs/docs/capstone/chapter-1-system-architecture.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"chapter-1-system-architecture","title":"Chapter 1: System Architecture","sidebar_label":"1. System Architecture","sidebar_position":2},"sidebar":"textbookSidebar","previous":{"title":"Capstone Overview","permalink":"/Master-Robotics-AI/textbook/capstone/"},"next":{"title":"2. Robot Setup","permalink":"/Master-Robotics-AI/textbook/capstone/chapter-2-robot-setup"}}');var i=r(4848),s=r(8453);const a={id:"chapter-1-system-architecture",title:"Chapter 1: System Architecture",sidebar_label:"1. System Architecture",sidebar_position:2},c="Chapter 1: System Architecture Design",o={},d=[{value:"Chapter Goal",id:"chapter-goal",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"System Overview",id:"overview",level:2},{value:"High-Level Architecture",id:"high-level-architecture",level:3},{value:"Layer Responsibilities",id:"layer-responsibilities",level:3},{value:"ROS 2 Node Graph",id:"node-graph",level:2},{value:"Complete Node Architecture",id:"complete-node-architecture",level:3},{value:"Node Communication Diagram",id:"node-communication-diagram",level:3},{value:"Interface Contracts",id:"interfaces",level:2},{value:"Task Plan Message",id:"task-plan-message",level:3},{value:"Grounded Action Message",id:"grounded-action-message",level:3},{value:"Detection Array Message",id:"detection-array-message",level:3},{value:"Service Definitions",id:"service-definitions",level:3},{value:"Latency Budget",id:"latency",level:2},{value:"End-to-End Latency Target",id:"end-to-end-latency-target",level:3},{value:"Per-Component Requirements",id:"per-component-requirements",level:3},{value:"Latency Monitoring",id:"latency-monitoring",level:3},{value:"Failure Modes and Recovery",id:"failures",level:2},{value:"Failure Responsibility Matrix",id:"failure-responsibility-matrix",level:3},{value:"Recovery Strategy Assignment",id:"recovery-strategy-assignment",level:3},{value:"Configuration Management",id:"configuration",level:2},{value:"Launch File Structure",id:"launch-file-structure",level:3},{value:"Parameter Files",id:"parameter-files",level:3},{value:"Summary",id:"summary",level:2},{value:"Design Review Checklist",id:"design-review-checklist",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-1-system-architecture-design",children:"Chapter 1: System Architecture Design"})}),"\n",(0,i.jsx)(n.h2,{id:"chapter-goal",children:"Chapter Goal"}),"\n",(0,i.jsxs)(n.p,{children:["By the end of this chapter, you will have ",(0,i.jsx)(n.strong,{children:"designed a complete system architecture for the integrated humanoid system"}),", including component diagrams, ROS 2 node graphs, interface contracts, and latency budget allocation."]}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"ID"}),(0,i.jsx)(n.th,{children:"Objective"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1.1"}),(0,i.jsx)(n.td,{children:"Design component hierarchy for integrated robotic system"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1.2"}),(0,i.jsx)(n.td,{children:"Define ROS 2 node graph and communication patterns"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1.3"}),(0,i.jsx)(n.td,{children:"Specify interface contracts between subsystems"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1.4"}),(0,i.jsx)(n.td,{children:"Allocate latency budgets across the pipeline"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1.5"}),(0,i.jsx)(n.td,{children:"Document failure modes and recovery responsibilities"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"System Overview"}),"\n",(0,i.jsx)(n.h3,{id:"high-level-architecture",children:"High-Level Architecture"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502                         HUMANOID SYSTEM ARCHITECTURE                        \u2502\r\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n\u2502                                                                             \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\r\n\u2502  \u2502                      COMMAND INTERFACE LAYER                          \u2502  \u2502\r\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502  \u2502\r\n\u2502  \u2502  \u2502   Audio     \u2502  \u2502   Speech    \u2502  \u2502    LLM      \u2502                   \u2502  \u2502\r\n\u2502  \u2502  \u2502   Capture   \u2502\u2500\u25ba\u2502   (Whisper) \u2502\u2500\u25ba\u2502   Planner   \u2502                   \u2502  \u2502\r\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2502  \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\r\n\u2502                                    \u2502                                        \u2502\r\n\u2502                                    \u25bc                                        \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\r\n\u2502  \u2502                        INTELLIGENCE LAYER                             \u2502  \u2502\r\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502  \u2502\r\n\u2502  \u2502  \u2502    VLM      \u2502  \u2502  Grounding  \u2502  \u2502   Safety    \u2502                   \u2502  \u2502\r\n\u2502  \u2502  \u2502   Scene     \u2502\u2500\u25ba\u2502   Layer     \u2502\u2500\u25ba\u2502   Filter    \u2502                   \u2502  \u2502\r\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2502  \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\r\n\u2502                                    \u2502                                        \u2502\r\n\u2502                                    \u25bc                                        \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\r\n\u2502  \u2502                        EXECUTION LAYER                                \u2502  \u2502\r\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502  \u2502\r\n\u2502  \u2502  \u2502 Navigation  \u2502  \u2502 Manipulation\u2502  \u2502   Behavior  \u2502                   \u2502  \u2502\r\n\u2502  \u2502  \u2502  (Nav2)     \u2502  \u2502  (MoveIt2)  \u2502  \u2502 Coordinator \u2502                   \u2502  \u2502\r\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2502  \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\r\n\u2502                                    \u2502                                        \u2502\r\n\u2502                                    \u25bc                                        \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\r\n\u2502  \u2502                        PERCEPTION LAYER                               \u2502  \u2502\r\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\r\n\u2502  \u2502  \u2502   VSLAM     \u2502  \u2502   Object    \u2502  \u2502   Depth     \u2502  \u2502    IMU      \u2502  \u2502  \u2502\r\n\u2502  \u2502  \u2502             \u2502  \u2502  Detection  \u2502  \u2502 Processing  \u2502  \u2502  Fusion     \u2502  \u2502  \u2502\r\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\r\n\u2502                                    \u2502                                        \u2502\r\n\u2502                                    \u25bc                                        \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\r\n\u2502  \u2502                         HARDWARE LAYER                                \u2502  \u2502\r\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\r\n\u2502  \u2502  \u2502  Cameras    \u2502  \u2502   LiDAR     \u2502  \u2502    IMU      \u2502  \u2502  Actuators  \u2502  \u2502  \u2502\r\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\r\n\u2502                                                                             \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h3,{id:"layer-responsibilities",children:"Layer Responsibilities"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Layer"}),(0,i.jsx)(n.th,{children:"Primary Responsibility"}),(0,i.jsx)(n.th,{children:"Timing Constraint"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Command Interface"}),(0,i.jsx)(n.td,{children:"Convert voice to task plan"}),(0,i.jsx)(n.td,{children:"200ms speech + 500ms LLM"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Intelligence"}),(0,i.jsx)(n.td,{children:"Ground symbols, verify safety"}),(0,i.jsx)(n.td,{children:"50ms grounding + 10ms safety"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Execution"}),(0,i.jsx)(n.td,{children:"Execute navigation and manipulation"}),(0,i.jsx)(n.td,{children:"Real-time control"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Perception"}),(0,i.jsx)(n.td,{children:"Provide world model"}),(0,i.jsx)(n.td,{children:"30 Hz updates"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Hardware"}),(0,i.jsx)(n.td,{children:"Interface with sensors/actuators"}),(0,i.jsx)(n.td,{children:"Hardware-determined"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"node-graph",children:"ROS 2 Node Graph"}),"\n",(0,i.jsx)(n.h3,{id:"complete-node-architecture",children:"Complete Node Architecture"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""ROS 2 node graph for integrated humanoid system."""\r\n\r\n# ============================================================================\r\n# COMMAND INTERFACE NODES\r\n# ============================================================================\r\n\r\n# Node: audio_capture\r\n# Responsibility: Capture microphone audio, detect speech\r\n# Publishes: /audio/raw (AudioData), /audio/speech_detected (Bool)\r\n# Subscribes: None\r\n# Parameters: sample_rate (16000), device_id\r\n\r\n# Node: speech_recognition\r\n# Responsibility: Transcribe audio to text using Whisper\r\n# Publishes: /speech/text (String), /speech/confidence (Float32)\r\n# Subscribes: /audio/raw (AudioData)\r\n# Parameters: model_size ("base"), language ("en")\r\n\r\n# Node: task_planner\r\n# Responsibility: Convert text command to task plan using LLM\r\n# Publishes: /task_planner/plan (TaskPlan)\r\n# Subscribes: /speech/text (String)\r\n# Parameters: model ("gpt-4"), temperature (0)\r\n\r\n# ============================================================================\r\n# INTELLIGENCE NODES\r\n# ============================================================================\r\n\r\n# Node: vlm_scene_understanding\r\n# Responsibility: Answer queries about camera images\r\n# Publishes: /vlm/scene_description (SceneDescription)\r\n# Subscribes: /camera/rgb (Image)\r\n# Service: /vlm/query (VLMQuery)\r\n# Parameters: model ("llava-1.5-7b")\r\n\r\n# Node: grounding\r\n# Responsibility: Map symbols to physical quantities\r\n# Publishes: /grounding/action (GroundedAction)\r\n# Subscribes: /task_planner/plan (TaskPlan), /detections (DetectionArray)\r\n# Service: /grounding/resolve_object (ResolveObject)\r\n# Parameters: None\r\n\r\n# Node: safety_filter\r\n# Responsibility: Validate actions against safety constraints\r\n# Publishes: /safety/approved_action (GroundedAction), /safety/rejection (Rejection)\r\n# Subscribes: /grounding/action (GroundedAction)\r\n# Parameters: workspace_limits, max_velocity, max_force\r\n\r\n# ============================================================================\r\n# EXECUTION NODES\r\n# ============================================================================\r\n\r\n# Node: behavior_coordinator\r\n# Responsibility: Coordinate navigation and manipulation sequences\r\n# Publishes: /status/current_task (String)\r\n# Subscribes: /safety/approved_action (GroundedAction)\r\n# Action Client: /navigate_to_pose, /moveit/execute_trajectory\r\n\r\n# Node: navigation (Nav2 stack)\r\n# Responsibility: Plan and execute mobile base motion\r\n# Action Server: /navigate_to_pose (NavigateToPose)\r\n# Subscribes: /scan (LaserScan), /odom (Odometry)\r\n\r\n# Node: manipulation (MoveIt2)\r\n# Responsibility: Plan and execute arm motion\r\n# Action Server: /moveit/execute_trajectory (ExecuteTrajectory)\r\n# Subscribes: /joint_states (JointState)\r\n\r\n# ============================================================================\r\n# PERCEPTION NODES\r\n# ============================================================================\r\n\r\n# Node: vslam (Isaac ROS)\r\n# Responsibility: Visual-inertial odometry and mapping\r\n# Publishes: /visual_slam/tracking/odometry (Odometry)\r\n# Subscribes: /camera/left/image (Image), /camera/right/image (Image), /imu (Imu)\r\n\r\n# Node: object_detection (Isaac ROS)\r\n# Responsibility: Detect and localize objects\r\n# Publishes: /detections (DetectionArray)\r\n# Subscribes: /camera/rgb (Image), /camera/depth (Image)\r\n\r\n# Node: depth_processing\r\n# Responsibility: Generate point clouds from depth\r\n# Publishes: /points (PointCloud2)\r\n# Subscribes: /camera/depth (Image), /camera/info (CameraInfo)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"node-communication-diagram",children:"Node Communication Diagram"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     /audio/raw      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    /speech/text    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502   audio_    \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502   speech_   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502   task_     \u2502\r\n\u2502   capture   \u2502                     \u2502 recognition \u2502                    \u2502   planner   \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                                                                              \u2502\r\n                                                                    /task_planner/plan\r\n                                                                              \u2502\r\n                                                                              \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    /camera/rgb      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   /detections   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502   camera_   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502   object_   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502  grounding  \u2502\r\n\u2502   driver    \u2502                     \u2502  detection  \u2502                 \u2502             \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                                                                          \u2502\r\n                                                                   /grounding/action\r\n                                                                          \u2502\r\n                                                                          \u25bc\r\n                                                                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                                                                   \u2502   safety_   \u2502\r\n                                                                   \u2502   filter    \u2502\r\n                                                                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                                                                          \u2502\r\n                                                              /safety/approved_action\r\n                                                                          \u2502\r\n                                                                          \u25bc\r\n                                                                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                                                                   \u2502  behavior_  \u2502\r\n                                                                   \u2502 coordinator \u2502\r\n                                                                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                                                                     \u2502         \u2502\r\n                                                    NavigateToPose   \u2502         \u2502  ExecuteTrajectory\r\n                                                                     \u25bc         \u25bc\r\n                                                              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                                                              \u2502  Nav2   \u2502 \u2502 MoveIt2 \u2502\r\n                                                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"interfaces",children:"Interface Contracts"}),"\n",(0,i.jsx)(n.h3,{id:"task-plan-message",children:"Task Plan Message"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# custom_msgs/msg/TaskPlan.msg\r\n\r\n# Header\r\nstring command_id\r\nstring original_command\r\nbuiltin_interfaces/Time timestamp\r\n\r\n# Actions to execute\r\nAction[] actions\r\n\r\n# Metadata\r\nstring success_criteria\r\nstring[] abort_conditions\r\nfloat32 confidence\r\n\r\n---\r\n# custom_msgs/msg/Action.msg\r\n\r\nstring action_type  # "navigate_to", "pick", "place", etc.\r\nstring target       # Object reference or null\r\nActionParameters parameters\r\nstring[] preconditions\r\nstring[] effects\r\n\r\n---\r\n# custom_msgs/msg/ActionParameters.msg\r\n\r\ngeometry_msgs/Point position\r\ngeometry_msgs/Quaternion orientation\r\nfloat32 speed\r\nfloat32 force\n'})}),"\n",(0,i.jsx)(n.h3,{id:"grounded-action-message",children:"Grounded Action Message"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# custom_msgs/msg/GroundedAction.msg\r\n\r\n# Original action\r\nAction original_action\r\n\r\n# Grounded values\r\ngeometry_msgs/PoseStamped target_pose\r\nstring target_object_id\r\nfloat32 target_confidence\r\n\r\n# Execution parameters\r\nstring action_server  # e.g., "/navigate_to_pose"\r\nstring action_type    # e.g., "nav2_msgs/action/NavigateToPose"\r\nstring goal_json      # Serialized goal message\n'})}),"\n",(0,i.jsx)(n.h3,{id:"detection-array-message",children:"Detection Array Message"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# custom_msgs/msg/DetectionArray.msg\r\n\r\nstd_msgs/Header header\r\nDetection[] detections\r\n\r\n---\r\n# custom_msgs/msg/Detection.msg\r\n\r\nstring class_name\r\nint32 instance_id\r\nfloat32 confidence\r\nBoundingBox2D bbox_2d\r\ngeometry_msgs/Point position_3d\r\nstring color\n"})}),"\n",(0,i.jsx)(n.h3,{id:"service-definitions",children:"Service Definitions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# custom_msgs/srv/ResolveObject.srv\r\n\r\n# Request\r\nstring reference  # e.g., "red mug", "the box on the left"\r\n\r\n---\r\n\r\n# Response\r\nbool success\r\nDetection detected_object\r\nstring error_message\r\nstring[] ambiguous_candidates  # If multiple matches\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"latency",children:"Latency Budget"}),"\n",(0,i.jsx)(n.h3,{id:"end-to-end-latency-target",children:"End-to-End Latency Target"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Goal"}),": < 3 seconds from voice command to motion start"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502                    LATENCY BUDGET ALLOCATION                            \u2502\r\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n\u2502                                                                         \u2502\r\n\u2502  Speech Capture    \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 2000 ms (user speaking)                 \u2502\r\n\u2502         \u2502                                                               \u2502\r\n\u2502         \u25bc                                                               \u2502\r\n\u2502  Speech Recognition \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 200 ms (Whisper base)                   \u2502\r\n\u2502         \u2502                                                               \u2502\r\n\u2502         \u25bc                                                               \u2502\r\n\u2502  LLM Planning \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 500 ms (GPT-4 or local)                  \u2502\r\n\u2502         \u2502                                                               \u2502\r\n\u2502         \u25bc                                                               \u2502\r\n\u2502  VLM Query (if needed) \u2500\u2500\u2500\u2500\u2500\u2500\u2500 2000 ms (optional)                       \u2502\r\n\u2502         \u2502                                                               \u2502\r\n\u2502         \u25bc                                                               \u2502\r\n\u2502  Grounding \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 50 ms (perception lookup)                \u2502\r\n\u2502         \u2502                                                               \u2502\r\n\u2502         \u25bc                                                               \u2502\r\n\u2502  Safety Check \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 10 ms (constraint validation)            \u2502\r\n\u2502         \u2502                                                               \u2502\r\n\u2502         \u25bc                                                               \u2502\r\n\u2502  Motion Planning \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 200 ms (MoveIt2 or Nav2)                 \u2502\r\n\u2502         \u2502                                                               \u2502\r\n\u2502         \u25bc                                                               \u2502\r\n\u2502  Execution Start \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 0 ms (command sent)                      \u2502\r\n\u2502                                                                         \u2502\r\n\u2502  \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550   \u2502\r\n\u2502  TOTAL (without VLM): ~960 ms command processing + 2000 ms speech      \u2502\r\n\u2502  TOTAL (with VLM): ~2960 ms command processing + 2000 ms speech        \u2502\r\n\u2502                                                                         \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h3,{id:"per-component-requirements",children:"Per-Component Requirements"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Component"}),(0,i.jsx)(n.th,{children:"Budget"}),(0,i.jsx)(n.th,{children:"Justification"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Audio capture"}),(0,i.jsx)(n.td,{children:"Real-time"}),(0,i.jsx)(n.td,{children:"Hardware constraint"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Whisper (base)"}),(0,i.jsx)(n.td,{children:"200 ms"}),(0,i.jsx)(n.td,{children:"Tested on 2s audio"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LLM planning"}),(0,i.jsx)(n.td,{children:"500 ms"}),(0,i.jsx)(n.td,{children:"API call with caching"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"VLM query"}),(0,i.jsx)(n.td,{children:"2000 ms"}),(0,i.jsx)(n.td,{children:"Only when needed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Object detection"}),(0,i.jsx)(n.td,{children:"33 ms"}),(0,i.jsx)(n.td,{children:"30 Hz pipeline"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Grounding"}),(0,i.jsx)(n.td,{children:"50 ms"}),(0,i.jsx)(n.td,{children:"Lookup + transform"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Safety filter"}),(0,i.jsx)(n.td,{children:"10 ms"}),(0,i.jsx)(n.td,{children:"Constraint checks"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Nav2 planning"}),(0,i.jsx)(n.td,{children:"100 ms"}),(0,i.jsx)(n.td,{children:"Local planner"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MoveIt2 planning"}),(0,i.jsx)(n.td,{children:"200 ms"}),(0,i.jsx)(n.td,{children:"OMPL RRT"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"latency-monitoring",children:"Latency Monitoring"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class LatencyMonitor(Node):\r\n    \"\"\"Monitor and report latency at each pipeline stage.\"\"\"\r\n\r\n    def __init__(self):\r\n        super().__init__('latency_monitor')\r\n\r\n        self.stage_times = {}\r\n        self.budgets = {\r\n            'speech': 200,\r\n            'llm': 500,\r\n            'vlm': 2000,\r\n            'grounding': 50,\r\n            'safety': 10,\r\n            'planning': 200,\r\n        }\r\n\r\n    def record_stage(self, stage: str, latency_ms: float):\r\n        \"\"\"Record latency for a stage.\"\"\"\r\n        self.stage_times[stage] = latency_ms\r\n\r\n        budget = self.budgets.get(stage, float('inf'))\r\n        if latency_ms > budget:\r\n            self.get_logger().warn(\r\n                f'{stage} exceeded budget: {latency_ms:.0f}ms > {budget}ms'\r\n            )\r\n\r\n    def get_total_latency(self) -> float:\r\n        \"\"\"Get total pipeline latency.\"\"\"\r\n        return sum(self.stage_times.values())\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"failures",children:"Failure Modes and Recovery"}),"\n",(0,i.jsx)(n.h3,{id:"failure-responsibility-matrix",children:"Failure Responsibility Matrix"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Component"}),(0,i.jsx)(n.th,{children:"Failure Mode"}),(0,i.jsx)(n.th,{children:"Detection"}),(0,i.jsx)(n.th,{children:"Recovery Owner"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Audio capture"}),(0,i.jsx)(n.td,{children:"No audio"}),(0,i.jsx)(n.td,{children:"Timeout"}),(0,i.jsx)(n.td,{children:"Audio node"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Speech recognition"}),(0,i.jsx)(n.td,{children:"Low confidence"}),(0,i.jsx)(n.td,{children:"Threshold"}),(0,i.jsx)(n.td,{children:"Speech node"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LLM planner"}),(0,i.jsx)(n.td,{children:"Timeout"}),(0,i.jsx)(n.td,{children:"Timer"}),(0,i.jsx)(n.td,{children:"Planner node"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LLM planner"}),(0,i.jsx)(n.td,{children:"Invalid output"}),(0,i.jsx)(n.td,{children:"Schema validation"}),(0,i.jsx)(n.td,{children:"Planner node"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Grounding"}),(0,i.jsx)(n.td,{children:"Object not found"}),(0,i.jsx)(n.td,{children:"Empty result"}),(0,i.jsx)(n.td,{children:"Grounding node"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Grounding"}),(0,i.jsx)(n.td,{children:"Ambiguous"}),(0,i.jsx)(n.td,{children:"Multiple matches"}),(0,i.jsx)(n.td,{children:"Behavior coordinator"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Safety"}),(0,i.jsx)(n.td,{children:"Rejection"}),(0,i.jsx)(n.td,{children:"Safety filter"}),(0,i.jsx)(n.td,{children:"Behavior coordinator"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Navigation"}),(0,i.jsx)(n.td,{children:"Blocked"}),(0,i.jsx)(n.td,{children:"Costmap"}),(0,i.jsx)(n.td,{children:"Behavior coordinator"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Manipulation"}),(0,i.jsx)(n.td,{children:"Grasp failure"}),(0,i.jsx)(n.td,{children:"Force feedback"}),(0,i.jsx)(n.td,{children:"Behavior coordinator"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"recovery-strategy-assignment",children:"Recovery Strategy Assignment"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"RECOVERY_STRATEGIES = {\r\n    # Audio failures\r\n    'audio_timeout': {\r\n        'owner': 'audio_capture',\r\n        'strategy': 'prompt_user',\r\n        'message': \"I didn't hear anything. Could you repeat that?\"\r\n    },\r\n\r\n    # Speech failures\r\n    'low_confidence': {\r\n        'owner': 'speech_recognition',\r\n        'strategy': 'request_clarification',\r\n        'message': \"I'm not sure I understood. Did you say '{transcription}'?\"\r\n    },\r\n\r\n    # LLM failures\r\n    'llm_timeout': {\r\n        'owner': 'task_planner',\r\n        'strategy': 'retry_with_fallback',\r\n        'max_retries': 2,\r\n        'fallback': 'simplified_planning'\r\n    },\r\n    'invalid_plan': {\r\n        'owner': 'task_planner',\r\n        'strategy': 'regenerate',\r\n        'max_retries': 1\r\n    },\r\n\r\n    # Grounding failures\r\n    'object_not_found': {\r\n        'owner': 'behavior_coordinator',\r\n        'strategy': 'search_or_ask',\r\n        'search_patterns': ['rotate_in_place', 'move_to_last_known'],\r\n        'fallback': 'request_help'\r\n    },\r\n    'ambiguous_reference': {\r\n        'owner': 'behavior_coordinator',\r\n        'strategy': 'disambiguate',\r\n        'method': 'ask_user'\r\n    },\r\n\r\n    # Safety failures\r\n    'safety_rejection': {\r\n        'owner': 'behavior_coordinator',\r\n        'strategy': 'report_and_suggest',\r\n        'include_suggestion': True\r\n    },\r\n\r\n    # Execution failures\r\n    'navigation_blocked': {\r\n        'owner': 'behavior_coordinator',\r\n        'strategy': 'replan_or_wait',\r\n        'wait_timeout': 10.0,\r\n        'fallback': 'report_blocked'\r\n    },\r\n    'grasp_failure': {\r\n        'owner': 'behavior_coordinator',\r\n        'strategy': 'retry_with_adjustment',\r\n        'max_retries': 2,\r\n        'adjustment': 'offset_approach'\r\n    }\r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration Management"}),"\n",(0,i.jsx)(n.h3,{id:"launch-file-structure",children:"Launch File Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# humanoid_bringup/launch/full_system.launch.py\r\n\r\nfrom launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom launch.actions import IncludeLaunchDescription\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        # Perception layer\r\n        IncludeLaunchDescription(\r\n            'isaac_ros_visual_slam/launch/visual_slam.launch.py'\r\n        ),\r\n        IncludeLaunchDescription(\r\n            'isaac_ros_detection/launch/detection.launch.py'\r\n        ),\r\n\r\n        # Command interface\r\n        Node(\r\n            package='humanoid_command',\r\n            executable='audio_capture',\r\n            name='audio_capture',\r\n            parameters=[{'sample_rate': 16000}]\r\n        ),\r\n        Node(\r\n            package='humanoid_command',\r\n            executable='speech_recognition',\r\n            name='speech_recognition',\r\n            parameters=[{'model_size': 'base'}]\r\n        ),\r\n        Node(\r\n            package='humanoid_command',\r\n            executable='task_planner',\r\n            name='task_planner',\r\n            parameters=[{'model': 'gpt-4'}]\r\n        ),\r\n\r\n        # Intelligence layer\r\n        Node(\r\n            package='humanoid_intelligence',\r\n            executable='grounding',\r\n            name='grounding'\r\n        ),\r\n        Node(\r\n            package='humanoid_intelligence',\r\n            executable='safety_filter',\r\n            name='safety_filter',\r\n            parameters=[{\r\n                'max_velocity': 0.5,\r\n                'max_force': 50.0,\r\n                'workspace_min': [0.1, -0.6, 0.0],\r\n                'workspace_max': [0.9, 0.6, 1.2]\r\n            }]\r\n        ),\r\n\r\n        # Execution layer\r\n        Node(\r\n            package='humanoid_execution',\r\n            executable='behavior_coordinator',\r\n            name='behavior_coordinator'\r\n        ),\r\n        IncludeLaunchDescription(\r\n            'nav2_bringup/launch/navigation.launch.py'\r\n        ),\r\n        IncludeLaunchDescription(\r\n            'moveit2/launch/move_group.launch.py'\r\n        ),\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h3,{id:"parameter-files",children:"Parameter Files"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# config/humanoid_params.yaml\r\n\r\nhumanoid_system:\r\n  ros__parameters:\r\n    # Latency budgets (ms)\r\n    latency:\r\n      speech_budget: 200\r\n      llm_budget: 500\r\n      grounding_budget: 50\r\n      safety_budget: 10\r\n\r\n    # Safety limits\r\n    safety:\r\n      max_linear_velocity: 0.5  # m/s\r\n      max_angular_velocity: 1.0  # rad/s\r\n      max_grip_force: 50.0  # N\r\n      workspace:\r\n        min: [0.1, -0.6, 0.0]\r\n        max: [0.9, 0.6, 1.2]\r\n\r\n    # Recovery parameters\r\n    recovery:\r\n      llm_max_retries: 2\r\n      grasp_max_retries: 2\r\n      navigation_wait_timeout: 10.0\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"This chapter defined the system architecture for the integrated humanoid:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Layer architecture"})," separates concerns: command interface, intelligence, execution, perception, hardware."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"ROS 2 node graph"})," defines components, topics, and communication patterns."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface contracts"})," specify message formats for interoperability."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Latency budgets"})," allocate time across the pipeline to meet responsiveness targets."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Failure modes"})," are mapped to recovery owners and strategies."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration"})," is managed through launch files and parameter files."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"design-review-checklist",children:"Design Review Checklist"}),"\n",(0,i.jsx)(n.p,{children:"Before proceeding, verify:"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All major components have defined ROS 2 nodes"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Topics and services are documented"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Latency budget totals < 3 seconds"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Every failure mode has a recovery owner"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configuration is parameterized, not hardcoded"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.a,{href:"/capstone/chapter-2-robot-setup",children:"Chapter 2: Humanoid Robot Setup"}),", you'll configure the humanoid robot model in Isaac Sim with all required sensors and actuators."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>c});var t=r(6540);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);