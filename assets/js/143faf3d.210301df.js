"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2075],{3921(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"module-3/chapter-1-simulation-fundamentals","title":"Chapter 1: Simulation Fundamentals","description":"Chapter Goal","source":"@site/docs/module-3/chapter-1-simulation-fundamentals.md","sourceDirName":"module-3","slug":"/module-3/chapter-1-simulation-fundamentals","permalink":"/Master-Robotics-AI/textbook/module-3/chapter-1-simulation-fundamentals","draft":false,"unlisted":false,"editUrl":"https://github.com/HasnainCodeHub/Master-Robotics-AI/tree/main/docs/docs/module-3/chapter-1-simulation-fundamentals.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"chapter-1-simulation-fundamentals","title":"Chapter 1: Simulation Fundamentals","sidebar_label":"1. Simulation Fundamentals","sidebar_position":2},"sidebar":"textbookSidebar","previous":{"title":"Module 3 Overview","permalink":"/Master-Robotics-AI/textbook/module-3/"},"next":{"title":"2. Gazebo World Building","permalink":"/Master-Robotics-AI/textbook/module-3/chapter-2-gazebo-world-building"}}');var r=i(4848),t=i(8453);const l={id:"chapter-1-simulation-fundamentals",title:"Chapter 1: Simulation Fundamentals",sidebar_label:"1. Simulation Fundamentals",sidebar_position:2},d="Chapter 1: Simulation Fundamentals and Physics Engines",a={},o=[{value:"Chapter Goal",id:"chapter-goal",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"The Promise and Peril of Simulation",id:"the-promise-and-peril-of-simulation",level:2},{value:"What Physics Engines Simulate",id:"physics-engines",level:2},{value:"What Is Simulated Accurately",id:"what-is-simulated-accurately",level:3},{value:"What Is Simplified or Ignored",id:"what-is-simplified-or-ignored",level:3},{value:"Physics Engine Comparison",id:"engine-comparison",level:2},{value:"ODE (Open Dynamics Engine)",id:"ode-open-dynamics-engine",level:3},{value:"Bullet",id:"bullet",level:3},{value:"DART (Dynamic Animation and Robotics Toolkit)",id:"dart-dynamic-animation-and-robotics-toolkit",level:3},{value:"Decision Framework",id:"decision-framework",level:3},{value:"Gazebo Architecture",id:"gazebo-architecture",level:2},{value:"ros_gz Bridge",id:"ros_gz-bridge",level:3},{value:"The Simulation Loop",id:"simulation-loop",level:2},{value:"Step-by-Step Execution",id:"step-by-step-execution",level:3},{value:"Timing Concepts",id:"timing-concepts",level:3},{value:"Calculating Effective Control Rate",id:"calculating-effective-control-rate",level:3},{value:"Installation and Verification",id:"installation",level:2},{value:"Installing Gazebo Harmonic",id:"installing-gazebo-harmonic",level:3},{value:"Verification Steps",id:"verification-steps",level:3},{value:"The Fidelity-Speed Tradeoff",id:"tradeoff",level:2},{value:"What Simulation Cannot Tell You",id:"limitations",level:2},{value:"Summary",id:"summary",level:2},{value:"Self-Assessment Questions",id:"self-assessment-questions",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-1-simulation-fundamentals-and-physics-engines",children:"Chapter 1: Simulation Fundamentals and Physics Engines"})}),"\n",(0,r.jsx)(n.h2,{id:"chapter-goal",children:"Chapter Goal"}),"\n",(0,r.jsxs)(n.p,{children:["By the end of this chapter, you will be able to ",(0,r.jsx)(n.strong,{children:"explain what physics simulation does (and does not) model, compare physics engine characteristics, and establish Gazebo as the primary simulation environment"})," for robotics development."]}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"ID"}),(0,r.jsx)(n.th,{children:"Objective"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1.1"}),(0,r.jsx)(n.td,{children:"Explain what a physics engine simulates (rigid body dynamics, collision, joints) and what it simplifies"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1.2"}),(0,r.jsx)(n.td,{children:"Compare physics engines (ODE, Bullet, DART) and articulate tradeoffs for robotics"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1.3"}),(0,r.jsx)(n.td,{children:"Install and verify Gazebo Harmonic with ros_gz bridge functioning"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1.4"}),(0,r.jsx)(n.td,{children:"Explain the simulation loop and its relationship to real-time"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"the-promise-and-peril-of-simulation",children:"The Promise and Peril of Simulation"}),"\n",(0,r.jsx)(n.p,{children:"Consider this scenario: You develop a robot navigation algorithm. In simulation, it achieves 98% success rate navigating a warehouse. You deploy to hardware and it fails 40% of the time."}),"\n",(0,r.jsx)(n.p,{children:"What happened?"}),"\n",(0,r.jsx)(n.p,{children:"The algorithm learned behaviors that work only in simulation:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Perfect sensor readings (no noise, no dropout)"}),"\n",(0,r.jsx)(n.li,{children:"Instant motor response (no delay, no saturation)"}),"\n",(0,r.jsx)(n.li,{children:"Idealized physics (perfect friction, no vibration)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"This is the reality gap."})," Understanding it starts with understanding what physics engines actually do."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"physics-engines",children:"What Physics Engines Simulate"}),"\n",(0,r.jsx)(n.p,{children:"A physics engine is software that approximates physical laws numerically."}),"\n",(0,r.jsx)(n.h3,{id:"what-is-simulated-accurately",children:"What Is Simulated Accurately"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Phenomenon"}),(0,r.jsx)(n.th,{children:"How It's Modeled"}),(0,r.jsx)(n.th,{children:"Accuracy"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Rigid body dynamics"})}),(0,r.jsx)(n.td,{children:"Newton-Euler equations"}),(0,r.jsx)(n.td,{children:"High for solid objects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Collision detection"})}),(0,r.jsx)(n.td,{children:"Geometric intersection"}),(0,r.jsx)(n.td,{children:"High for convex shapes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Contact forces"})}),(0,r.jsx)(n.td,{children:"Constraint-based or impulse"}),(0,r.jsx)(n.td,{children:"Moderate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Joint constraints"})}),(0,r.jsx)(n.td,{children:"Lagrangian mechanics"}),(0,r.jsx)(n.td,{children:"High"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Gravity"})}),(0,r.jsx)(n.td,{children:"Constant acceleration"}),(0,r.jsx)(n.td,{children:"Exact"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Friction"})}),(0,r.jsx)(n.td,{children:"Coulomb model"}),(0,r.jsx)(n.td,{children:"Moderate"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"what-is-simplified-or-ignored",children:"What Is Simplified or Ignored"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Phenomenon"}),(0,r.jsx)(n.th,{children:"Reality"}),(0,r.jsx)(n.th,{children:"Simulation"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Deformable objects"})}),(0,r.jsx)(n.td,{children:"Complex material mechanics"}),(0,r.jsx)(n.td,{children:"Often rigid or simple spring"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Fluid dynamics"})}),(0,r.jsx)(n.td,{children:"Navier-Stokes equations"}),(0,r.jsx)(n.td,{children:"Usually ignored or very simplified"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"High-frequency vibration"})}),(0,r.jsx)(n.td,{children:"Continuous phenomena"}),(0,r.jsx)(n.td,{children:"Discretized away by step size"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Thermal effects"})}),(0,r.jsx)(n.td,{children:"Temperature-dependent properties"}),(0,r.jsx)(n.td,{children:"Usually constant properties"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Wear and degradation"})}),(0,r.jsx)(n.td,{children:"Material changes over time"}),(0,r.jsx)(n.td,{children:"Static properties"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Electrical dynamics"})}),(0,r.jsx)(n.td,{children:"Motor winding inductance"}),(0,r.jsx)(n.td,{children:"Instantaneous torque"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Physical Grounding"}),": When configuring simulated sensors and actuators (Chapters 3-4), you must understand these limitations. A simulated IMU won't have thermal drift. A simulated motor won't have electrical time constants. You can add approximations, but they're never complete."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"engine-comparison",children:"Physics Engine Comparison"}),"\n",(0,r.jsx)(n.p,{children:"Gazebo supports multiple physics engines. Each has different strengths."}),"\n",(0,r.jsx)(n.h3,{id:"ode-open-dynamics-engine",children:"ODE (Open Dynamics Engine)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Default in Gazebo"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Characteristic"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Speed"}),(0,r.jsx)(n.td,{children:"Fast"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Contact handling"}),(0,r.jsx)(n.td,{children:"Adequate for most robotics"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Accuracy"}),(0,r.jsx)(n.td,{children:"Good for rigid bodies"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Articulated bodies"}),(0,r.jsx)(n.td,{children:"Moderate"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use for"}),": General mobile robot simulation, initial development"]}),"\n",(0,r.jsx)(n.h3,{id:"bullet",children:"Bullet"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Better contact physics"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Characteristic"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Speed"}),(0,r.jsx)(n.td,{children:"Moderate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Contact handling"}),(0,r.jsx)(n.td,{children:"Better friction, more stable stacking"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Accuracy"}),(0,r.jsx)(n.td,{children:"Good with tuning"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Articulated bodies"}),(0,r.jsx)(n.td,{children:"Good"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use for"}),": Manipulation tasks, contact-rich scenarios"]}),"\n",(0,r.jsx)(n.h3,{id:"dart-dynamic-animation-and-robotics-toolkit",children:"DART (Dynamic Animation and Robotics Toolkit)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Designed for robotics"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Characteristic"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Speed"}),(0,r.jsx)(n.td,{children:"Moderate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Contact handling"}),(0,r.jsx)(n.td,{children:"Good"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Accuracy"}),(0,r.jsx)(n.td,{children:"High for articulated systems"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Articulated bodies"}),(0,r.jsx)(n.td,{children:"Excellent (skeletal models)"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use for"}),": Humanoid robots, complex kinematic chains"]}),"\n",(0,r.jsx)(n.h3,{id:"decision-framework",children:"Decision Framework"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"What is your primary task?\r\n\u251c\u2500\u2500 Mobile robot navigation \u2192 ODE (default, fast)\r\n\u251c\u2500\u2500 Object manipulation \u2192 Bullet (better contacts)\r\n\u2514\u2500\u2500 Humanoid/legged robot \u2192 DART (articulated bodies)\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"gazebo-architecture",children:"Gazebo Architecture"}),"\n",(0,r.jsx)(n.p,{children:"Gazebo Harmonic (the current version) has three main components:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502                      Gazebo Architecture                         \u2502\r\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n\u2502                                                                  \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                           \u2502\r\n\u2502  \u2502   Gazebo Server  \u2502 \u25c4\u2500\u2500 Physics simulation (headless)         \u2502\r\n\u2502  \u2502   (gz sim -s)    \u2502     - Physics engine                      \u2502\r\n\u2502  \u2502                  \u2502     - Sensor simulation                    \u2502\r\n\u2502  \u2502                  \u2502     - Plugin execution                     \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                           \u2502\r\n\u2502           \u2502                                                      \u2502\r\n\u2502           \u2502 Gazebo Transport                                     \u2502\r\n\u2502           \u2502                                                      \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                           \u2502\r\n\u2502  \u2502    Gazebo GUI    \u2502 \u25c4\u2500\u2500 Visualization                         \u2502\r\n\u2502  \u2502   (gz sim -g)    \u2502     - 3D rendering                        \u2502\r\n\u2502  \u2502                  \u2502     - Model inspection                     \u2502\r\n\u2502  \u2502                  \u2502     - Interactive tools                    \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                           \u2502\r\n\u2502                                                                  \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                           \u2502\r\n\u2502  \u2502   ros_gz_bridge  \u2502 \u25c4\u2500\u2500 ROS 2 integration                     \u2502\r\n\u2502  \u2502                  \u2502     - Topic bridging                       \u2502\r\n\u2502  \u2502                  \u2502     - Service bridging                     \u2502\r\n\u2502  \u2502                  \u2502     - Parameter passing                    \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                           \u2502\r\n\u2502                                                                  \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ros_gz-bridge",children:"ros_gz Bridge"}),"\n",(0,r.jsx)(n.p,{children:"The bridge connects Gazebo topics to ROS 2 topics:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Gazebo Topic"}),(0,r.jsx)(n.th,{children:"ROS 2 Topic"}),(0,r.jsx)(n.th,{children:"Message Type"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/camera/image"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/camera/image_raw"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sensor_msgs/Image"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/lidar/scan"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/scan"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sensor_msgs/LaserScan"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/imu"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/imu/data"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sensor_msgs/Imu"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/cmd_vel"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/cmd_vel"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"geometry_msgs/Twist"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Point"}),": Your ROS 2 nodes don't know they're talking to simulation. They see standard topics with standard messages."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"simulation-loop",children:"The Simulation Loop"}),"\n",(0,r.jsx)(n.p,{children:"Understanding the simulation loop is essential for interpreting results."}),"\n",(0,r.jsx)(n.h3,{id:"step-by-step-execution",children:"Step-by-Step Execution"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"For each simulation step:\r\n    1. Read sensor states from physics world\r\n    2. Update sensor plugins (add noise, compute outputs)\r\n    3. Publish sensor data via ros_gz bridge\r\n    4. Receive commands via ros_gz bridge\r\n    5. Apply actuator commands to physics joints\r\n    6. Advance physics by dt (step size)\r\n    7. Resolve collisions and contacts\r\n    8. Update world state\n"})}),"\n",(0,r.jsx)(n.h3,{id:"timing-concepts",children:"Timing Concepts"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step size (dt)"}),": Time advanced per physics iteration"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Smaller dt \u2192 more accurate physics \u2192 slower simulation"}),"\n",(0,r.jsx)(n.li,{children:"Larger dt \u2192 less accurate physics \u2192 faster simulation"}),"\n",(0,r.jsx)(n.li,{children:"Typical: 1ms for precise work, 10ms for fast simulation"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Real-Time Factor (RTF)"}),": Ratio of simulation time to wall time"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"RTF = 1.0: simulation runs at real-time speed"}),"\n",(0,r.jsx)(n.li,{children:"RTF > 1.0: simulation runs faster than real-time"}),"\n",(0,r.jsx)(n.li,{children:"RTF < 1.0: simulation runs slower than real-time"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"calculating-effective-control-rate",children:"Calculating Effective Control Rate"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Physical Grounding"}),": If your control algorithm expects 100 Hz updates:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Step Size"}),(0,r.jsx)(n.th,{children:"RTF"}),(0,r.jsx)(n.th,{children:"Effective Rate"}),(0,r.jsx)(n.th,{children:"Meets Requirement?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1ms"}),(0,r.jsx)(n.td,{children:"1.0"}),(0,r.jsx)(n.td,{children:"1000 Hz"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"10ms"}),(0,r.jsx)(n.td,{children:"1.0"}),(0,r.jsx)(n.td,{children:"100 Hz"}),(0,r.jsx)(n.td,{children:"Exactly"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"10ms"}),(0,r.jsx)(n.td,{children:"0.5"}),(0,r.jsx)(n.td,{children:"50 Hz (wall)"}),(0,r.jsx)(n.td,{children:"No\u2014algorithm runs 2x slower"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1ms"}),(0,r.jsx)(n.td,{children:"2.0"}),(0,r.jsx)(n.td,{children:"2000 Hz (sim)"}),(0,r.jsx)(n.td,{children:"Yes, but results arrive faster than real-time"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"When RTF < 1.0, your perception-action loop runs slower than real-time. This matters when testing timing-sensitive behaviors."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation and Verification"}),"\n",(0,r.jsx)(n.h3,{id:"installing-gazebo-harmonic",children:"Installing Gazebo Harmonic"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Add Gazebo repository\r\nsudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg\r\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null\r\n\r\n# Install Gazebo Harmonic\r\nsudo apt update\r\nsudo apt install gz-harmonic\r\n\r\n# Install ros_gz bridge\r\nsudo apt install ros-humble-ros-gz\n'})}),"\n",(0,r.jsx)(n.h3,{id:"verification-steps",children:"Verification Steps"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. Launch Gazebo with demo world:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz sim shapes.sdf\n"})}),"\n",(0,r.jsx)(n.p,{children:"You should see a world with basic shapes (box, sphere, cylinder)."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. Verify ros_gz bridge:"})}),"\n",(0,r.jsx)(n.p,{children:"Terminal 1:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz sim shapes.sdf\n"})}),"\n",(0,r.jsx)(n.p,{children:"Terminal 2:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run ros_gz_bridge parameter_bridge /clock@rosgraph_msgs/msg/Clock[gz.msgs.Clock\n"})}),"\n",(0,r.jsx)(n.p,{children:"Terminal 3:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /clock\n"})}),"\n",(0,r.jsx)(n.p,{children:"You should see clock messages flowing."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"3. Test a complete robot:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz sim -r gz_rover.sdf\n"})}),"\n",(0,r.jsx)(n.p,{children:"This launches a rover robot you can control via Gazebo."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"tradeoff",children:"The Fidelity-Speed Tradeoff"}),"\n",(0,r.jsx)(n.p,{children:"Every simulation decision involves trading fidelity for speed."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'High Fidelity \u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba High Speed\r\n     \u2502                                              \u2502\r\n     \u251c\u2500\u2500 0.1ms step size                           \u2502\r\n     \u251c\u2500\u2500 Bullet physics                            \u2502\r\n     \u251c\u2500\u2500 Full sensor noise models                  \u2502\r\n     \u251c\u2500\u2500 Mesh collision geometry                   \u2502\r\n     \u2502                                              \u2502\r\n     \u2502                                     10ms step size \u2500\u2500\u2524\r\n     \u2502                                     ODE physics \u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n     \u2502                                     Minimal noise \u2500\u2500\u2500\u2500\u2524\r\n     \u2502                                     Primitive collision \u2524\r\n     \u2502                                              \u2502\r\n     \u2514\u2500\u2500 "Research quality"          "Development speed" \u2500\u2500\u2518\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Recommendation"}),": Start with faster settings for algorithm development, then validate with higher fidelity before deployment."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"limitations",children:"What Simulation Cannot Tell You"}),"\n",(0,r.jsx)(n.p,{children:"Even perfect simulation cannot capture:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Limitation"}),(0,r.jsx)(n.th,{children:"Why It Matters"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Manufacturing variation"})}),(0,r.jsx)(n.td,{children:"Your specific robot differs from nominal"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Wear and degradation"})}),(0,r.jsx)(n.td,{children:"Real robots change over time"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Environmental variation"})}),(0,r.jsx)(n.td,{children:"Real floors aren't perfectly flat"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Sensor-specific artifacts"})}),(0,r.jsx)(n.td,{children:"Each sensor has unique quirks"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Electromagnetic interference"})}),(0,r.jsx)(n.td,{children:"Not modeled at all"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Thermal effects"})}),(0,r.jsx)(n.td,{children:"Components behave differently when hot"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The fundamental truth"}),": Simulation is a model, not reality. Models are useful precisely because they simplify\u2014but simplification means some truth is lost."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"This chapter established the foundation for physics simulation:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Physics engines"})," simulate rigid body dynamics, collisions, and joints accurately, but simplify deformation, fluids, and high-frequency phenomena."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Engine selection"})," depends on task: ODE for general use, Bullet for manipulation, DART for articulated robots."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Gazebo architecture"})," separates physics (server), visualization (GUI), and ROS integration (bridge)."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The simulation loop"})," advances physics in discrete steps; step size and RTF determine effective timing."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fidelity vs speed"})," is a fundamental tradeoff\u2014optimize for your development phase."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"self-assessment-questions",children:"Self-Assessment Questions"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Physics Limitation"}),": A robot grasps a foam ball in simulation and it works. On real hardware, the grip fails. What physics simplification most likely caused this?"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Engine Selection"}),": You're simulating a humanoid robot walking on rough terrain with many foot contacts. Which physics engine would you choose and why?"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Timing Calculation"}),": Your simulation runs at RTF=0.8 with 5ms step size. Your controller expects 200 Hz updates. Will it work correctly? What's the actual update rate?"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Architecture"}),": Your ROS 2 node receives camera images but they seem to come from the wrong angle. Where in the Gazebo architecture would you investigate?"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tradeoff Decision"}),": You need to run 10,000 navigation tests overnight. Would you prioritize fidelity or speed? What settings would you adjust?"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.a,{href:"/module-3/chapter-2-gazebo-world-building",children:"Chapter 2: Gazebo World Building"}),", you'll learn to create simulation environments using SDF\u2014the language that defines worlds, models, and their physics properties."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>d});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);