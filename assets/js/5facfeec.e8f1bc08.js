"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8557],{8190(r,n,e){e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"capstone/chapter-2-robot-setup","title":"Chapter 2: Humanoid Robot Setup","description":"Chapter Goal","source":"@site/docs/capstone/chapter-2-robot-setup.md","sourceDirName":"capstone","slug":"/capstone/chapter-2-robot-setup","permalink":"/Master-Robotics-AI/textbook/capstone/chapter-2-robot-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/HasnainCodeHub/Master-Robotics-AI/tree/main/docs/docs/capstone/chapter-2-robot-setup.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"chapter-2-robot-setup","title":"Chapter 2: Humanoid Robot Setup","sidebar_label":"2. Robot Setup","sidebar_position":3},"sidebar":"textbookSidebar","previous":{"title":"1. System Architecture","permalink":"/Master-Robotics-AI/textbook/capstone/chapter-1-system-architecture"},"next":{"title":"3. Navigation","permalink":"/Master-Robotics-AI/textbook/capstone/chapter-3-navigation"}}');var t=e(4848),a=e(8453);const o={id:"chapter-2-robot-setup",title:"Chapter 2: Humanoid Robot Setup",sidebar_label:"2. Robot Setup",sidebar_position:3},s="Chapter 2: Humanoid Robot Setup in Isaac Sim",l={},c=[{value:"Chapter Goal",id:"chapter-goal",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Robot Design Overview",id:"overview",level:2},{value:"Humanoid Configuration",id:"humanoid-configuration",level:3},{value:"Specifications",id:"specifications",level:3},{value:"URDF Construction",id:"urdf",level:2},{value:"Base Structure",id:"base-structure",level:3},{value:"Mobile Base Xacro",id:"mobile-base-xacro",level:3},{value:"7-DOF Arm Xacro",id:"7-dof-arm-xacro",level:3},{value:"Sensor Xacros",id:"sensor-xacros",level:3},{value:"Isaac Sim Import",id:"isaac-import",level:2},{value:"USD Scene Setup",id:"usd-scene-setup",level:3},{value:"URDF to USD Conversion",id:"urdf-to-usd-conversion",level:3},{value:"Sensor Configuration",id:"sensors",level:2},{value:"Camera Setup",id:"camera-setup",level:3},{value:"LiDAR Setup",id:"lidar-setup",level:3},{value:"IMU Setup",id:"imu-setup",level:3},{value:"Isaac ROS Integration",id:"isaac-ros",level:2},{value:"Perception Pipeline Launch",id:"perception-pipeline-launch",level:3},{value:"Robot Control Interface",id:"robot-control-interface",level:3},{value:"Verification Tests",id:"verification",level:2},{value:"Sensor Data Flow Test",id:"sensor-data-flow-test",level:3},{value:"Robot Control Test",id:"robot-control-test",level:3},{value:"Summary",id:"summary",level:2},{value:"Setup Checklist",id:"setup-checklist",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}];function d(r){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...r.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"chapter-2-humanoid-robot-setup-in-isaac-sim",children:"Chapter 2: Humanoid Robot Setup in Isaac Sim"})}),"\n",(0,t.jsx)(n.h2,{id:"chapter-goal",children:"Chapter Goal"}),"\n",(0,t.jsxs)(n.p,{children:["By the end of this chapter, you will have ",(0,t.jsx)(n.strong,{children:"configured a complete humanoid robot in Isaac Sim"})," with mobile base, dual arms, grippers, and full sensor suite, ready for VLA-controlled operation."]}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(n.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"ID"}),(0,t.jsx)(n.th,{children:"Objective"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2.1"}),(0,t.jsx)(n.td,{children:"Create a humanoid URDF with mobile base and dual arms"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2.2"}),(0,t.jsx)(n.td,{children:"Import and configure the robot in Isaac Sim"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2.3"}),(0,t.jsx)(n.td,{children:"Set up camera, LiDAR, and IMU sensors"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2.4"}),(0,t.jsx)(n.td,{children:"Configure Isaac ROS perception pipelines"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2.5"}),(0,t.jsx)(n.td,{children:"Verify sensor data flow and robot control"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Robot Design Overview"}),"\n",(0,t.jsx)(n.h3,{id:"humanoid-configuration",children:"Humanoid Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                    \u2502  Head   \u2502  \u2190 Stereo cameras + RGB-D\r\n                    \u2502 (Cameras)\u2502\r\n                    \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\r\n                         \u2502\r\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n              \u2502                     \u2502\r\n         \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510\r\n         \u2502  Left   \u2502          \u2502  Right  \u2502\r\n         \u2502   Arm   \u2502          \u2502   Arm   \u2502\r\n         \u2502 (7-DOF) \u2502          \u2502 (7-DOF) \u2502\r\n         \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\r\n              \u2502                    \u2502\r\n         \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510\r\n         \u2502 Gripper \u2502          \u2502 Gripper \u2502\r\n         \u2502 (2-DOF) \u2502          \u2502 (2-DOF) \u2502\r\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\r\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                    \u2502  Torso  \u2502  \u2190 IMU\r\n                    \u2502         \u2502\r\n                    \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\r\n                         \u2502\r\n                    \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510\r\n                    \u2502 Mobile  \u2502  \u2190 LiDAR, Wheel encoders\r\n                    \u2502  Base   \u2502\r\n                    \u2502(Diff/Omni)\u2502\r\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.h3,{id:"specifications",children:"Specifications"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Component"}),(0,t.jsx)(n.th,{children:"Configuration"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Mobile base"}),(0,t.jsx)(n.td,{children:"Differential drive or holonomic"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Arms"}),(0,t.jsx)(n.td,{children:"2x 7-DOF manipulators"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Grippers"}),(0,t.jsx)(n.td,{children:"2x parallel jaw (2-DOF each)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Head"}),(0,t.jsx)(n.td,{children:"Pan-tilt (2-DOF)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Cameras"}),(0,t.jsx)(n.td,{children:"Stereo + RGB-D"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"LiDAR"}),(0,t.jsx)(n.td,{children:"2D or 3D"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"IMU"}),(0,t.jsx)(n.td,{children:"6-DOF"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"urdf",children:"URDF Construction"}),"\n",(0,t.jsx)(n.h3,{id:"base-structure",children:"Base Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="humanoid" xmlns:xacro="http://ros.org/wiki/xacro">\r\n\r\n  \x3c!-- Include component xacros --\x3e\r\n  <xacro:include filename="$(find humanoid_description)/urdf/mobile_base.xacro"/>\r\n  <xacro:include filename="$(find humanoid_description)/urdf/torso.xacro"/>\r\n  <xacro:include filename="$(find humanoid_description)/urdf/arm.xacro"/>\r\n  <xacro:include filename="$(find humanoid_description)/urdf/gripper.xacro"/>\r\n  <xacro:include filename="$(find humanoid_description)/urdf/head.xacro"/>\r\n  <xacro:include filename="$(find humanoid_description)/urdf/sensors.xacro"/>\r\n\r\n  \x3c!-- Base link --\x3e\r\n  <link name="base_footprint"/>\r\n\r\n  \x3c!-- Mobile base --\x3e\r\n  <xacro:mobile_base parent="base_footprint"/>\r\n\r\n  \x3c!-- Torso --\x3e\r\n  <xacro:torso parent="base_link"/>\r\n\r\n  \x3c!-- Arms --\x3e\r\n  <xacro:arm prefix="left" parent="torso_link" reflect="1"/>\r\n  <xacro:arm prefix="right" parent="torso_link" reflect="-1"/>\r\n\r\n  \x3c!-- Grippers --\x3e\r\n  <xacro:gripper prefix="left" parent="left_arm_link_7"/>\r\n  <xacro:gripper prefix="right" parent="right_arm_link_7"/>\r\n\r\n  \x3c!-- Head with cameras --\x3e\r\n  <xacro:head parent="torso_link"/>\r\n\r\n  \x3c!-- Sensors --\x3e\r\n  <xacro:lidar parent="base_link"/>\r\n  <xacro:imu parent="torso_link"/>\r\n\r\n</robot>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"mobile-base-xacro",children:"Mobile Base Xacro"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'\x3c!-- mobile_base.xacro --\x3e\r\n<xacro:macro name="mobile_base" params="parent">\r\n\r\n  \x3c!-- Base link --\x3e\r\n  <joint name="base_joint" type="fixed">\r\n    <parent link="${parent}"/>\r\n    <child link="base_link"/>\r\n    <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.3" length="0.15"/>\r\n      </geometry>\r\n      <material name="dark_gray"/>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.3" length="0.15"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="30.0"/>\r\n      <inertia ixx="0.5" ixy="0" ixz="0"\r\n               iyy="0.5" iyz="0" izz="0.8"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Left wheel --\x3e\r\n  <joint name="left_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="left_wheel"/>\r\n    <origin xyz="0 0.25 -0.05" rpy="-1.5708 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n    <dynamics damping="0.1" friction="0.1"/>\r\n  </joint>\r\n\r\n  <link name="left_wheel">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.1" length="0.05"/>\r\n      </geometry>\r\n      <material name="black"/>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.1" length="0.05"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="2.0"/>\r\n      <inertia ixx="0.01" ixy="0" ixz="0"\r\n               iyy="0.01" iyz="0" izz="0.01"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Right wheel (similar) --\x3e\r\n  <joint name="right_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="right_wheel"/>\r\n    <origin xyz="0 -0.25 -0.05" rpy="-1.5708 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n    <dynamics damping="0.1" friction="0.1"/>\r\n  </joint>\r\n\r\n  <link name="right_wheel">\r\n    \x3c!-- Similar to left wheel --\x3e\r\n  </link>\r\n\r\n  \x3c!-- Caster wheel --\x3e\r\n  <joint name="caster_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="caster_wheel"/>\r\n    <origin xyz="-0.2 0 -0.05" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  <link name="caster_wheel">\r\n    <visual>\r\n      <geometry>\r\n        <sphere radius="0.05"/>\r\n      </geometry>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <sphere radius="0.05"/>\r\n      </geometry>\r\n    </collision>\r\n  </link>\r\n\r\n</xacro:macro>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"7-dof-arm-xacro",children:"7-DOF Arm Xacro"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'\x3c!-- arm.xacro --\x3e\r\n<xacro:macro name="arm" params="prefix parent reflect">\r\n\r\n  \x3c!-- Shoulder pitch --\x3e\r\n  <joint name="${prefix}_arm_joint_1" type="revolute">\r\n    <parent link="${parent}"/>\r\n    <child link="${prefix}_arm_link_1"/>\r\n    <origin xyz="0 ${reflect * 0.2} 0.3" rpy="0 0 0"/>\r\n    <axis xyz="1 0 0"/>\r\n    <limit lower="-3.14" upper="3.14" effort="100" velocity="2.0"/>\r\n    <dynamics damping="0.5" friction="0.1"/>\r\n  </joint>\r\n\r\n  <link name="${prefix}_arm_link_1">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.04" length="0.1"/>\r\n      </geometry>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="2.0"/>\r\n      <inertia ixx="0.01" ixy="0" ixz="0"\r\n               iyy="0.01" iyz="0" izz="0.005"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Shoulder roll --\x3e\r\n  <joint name="${prefix}_arm_joint_2" type="revolute">\r\n    <parent link="${prefix}_arm_link_1"/>\r\n    <child link="${prefix}_arm_link_2"/>\r\n    <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-2.0" upper="2.0" effort="100" velocity="2.0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Continue for joints 3-7... --\x3e\r\n  \x3c!-- Joint 3: Shoulder yaw --\x3e\r\n  \x3c!-- Joint 4: Elbow pitch --\x3e\r\n  \x3c!-- Joint 5: Wrist roll --\x3e\r\n  \x3c!-- Joint 6: Wrist pitch --\x3e\r\n  \x3c!-- Joint 7: Wrist yaw --\x3e\r\n\r\n  \x3c!-- End effector link --\x3e\r\n  <joint name="${prefix}_arm_ee_joint" type="fixed">\r\n    <parent link="${prefix}_arm_link_7"/>\r\n    <child link="${prefix}_arm_ee_link"/>\r\n    <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  <link name="${prefix}_arm_ee_link"/>\r\n\r\n</xacro:macro>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sensor-xacros",children:"Sensor Xacros"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'\x3c!-- sensors.xacro --\x3e\r\n\r\n\x3c!-- RGB-D Camera --\x3e\r\n<xacro:macro name="rgbd_camera" params="prefix parent">\r\n  <joint name="${prefix}_camera_joint" type="fixed">\r\n    <parent link="${parent}"/>\r\n    <child link="${prefix}_camera_link"/>\r\n    <origin xyz="0.05 0 0" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  <link name="${prefix}_camera_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.05 0.1 0.03"/>\r\n      </geometry>\r\n    </visual>\r\n  </link>\r\n\r\n  \x3c!-- Optical frame (Z forward, X right, Y down) --\x3e\r\n  <joint name="${prefix}_camera_optical_joint" type="fixed">\r\n    <parent link="${prefix}_camera_link"/>\r\n    <child link="${prefix}_camera_optical_frame"/>\r\n    <origin xyz="0 0 0" rpy="-1.5708 0 -1.5708"/>\r\n  </joint>\r\n\r\n  <link name="${prefix}_camera_optical_frame"/>\r\n\r\n  \x3c!-- Gazebo/Isaac sensor plugin defined separately --\x3e\r\n</xacro:macro>\r\n\r\n\x3c!-- LiDAR --\x3e\r\n<xacro:macro name="lidar" params="parent">\r\n  <joint name="lidar_joint" type="fixed">\r\n    <parent link="${parent}"/>\r\n    <child link="lidar_link"/>\r\n    <origin xyz="0.2 0 0.1" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  <link name="lidar_link">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.05"/>\r\n      </geometry>\r\n    </visual>\r\n  </link>\r\n</xacro:macro>\r\n\r\n\x3c!-- IMU --\x3e\r\n<xacro:macro name="imu" params="parent">\r\n  <joint name="imu_joint" type="fixed">\r\n    <parent link="${parent}"/>\r\n    <child link="imu_link"/>\r\n    <origin xyz="0 0 0" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  <link name="imu_link"/>\r\n</xacro:macro>\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"isaac-import",children:"Isaac Sim Import"}),"\n",(0,t.jsx)(n.h3,{id:"usd-scene-setup",children:"USD Scene Setup"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""Set up humanoid robot in Isaac Sim."""\r\n\r\nfrom omni.isaac.kit import SimulationApp\r\n\r\n# Launch Isaac Sim\r\nsimulation_app = SimulationApp({"headless": False})\r\n\r\nfrom omni.isaac.core import World\r\nfrom omni.isaac.core.utils.stage import add_reference_to_stage\r\nfrom omni.isaac.core.robots import Robot\r\nfrom omni.isaac.sensor import Camera, LidarRtx, IMUSensor\r\nimport omni.isaac.core.utils.prims as prim_utils\r\n\r\n\r\ndef setup_humanoid_scene():\r\n    """Create Isaac Sim scene with humanoid robot."""\r\n\r\n    # Create world\r\n    world = World(stage_units_in_meters=1.0)\r\n\r\n    # Add ground plane\r\n    world.scene.add_default_ground_plane()\r\n\r\n    # Import robot from URDF\r\n    # Note: URDF should be converted to USD first using URDF Importer\r\n    robot_usd_path = "/path/to/humanoid.usd"\r\n    robot_prim_path = "/World/humanoid"\r\n\r\n    add_reference_to_stage(robot_usd_path, robot_prim_path)\r\n\r\n    # Create robot object\r\n    robot = world.scene.add(Robot(\r\n        prim_path=robot_prim_path,\r\n        name="humanoid",\r\n        position=[0, 0, 0.1],\r\n        orientation=[1, 0, 0, 0]\r\n    ))\r\n\r\n    # Add environment objects\r\n    add_table(world)\r\n    add_objects(world)\r\n\r\n    return world, robot\r\n\r\n\r\ndef add_table(world):\r\n    """Add table to scene."""\r\n    from omni.isaac.core.prims import GeometryPrim\r\n\r\n    table = GeometryPrim(\r\n        prim_path="/World/table",\r\n        name="table",\r\n        position=[0.8, 0, 0],\r\n        scale=[1.0, 0.6, 0.8]\r\n    )\r\n\r\n    # Load table mesh\r\n    prim_utils.create_prim(\r\n        "/World/table",\r\n        "Cube",\r\n        position=[0.8, 0, 0.4],\r\n        scale=[0.6, 0.4, 0.01]  # Table top\r\n    )\r\n\r\n\r\ndef add_objects(world):\r\n    """Add manipulable objects."""\r\n    objects = [\r\n        {"name": "red_mug", "pos": [0.7, 0.1, 0.85], "color": [0.8, 0.1, 0.1]},\r\n        {"name": "blue_box", "pos": [0.8, -0.1, 0.85], "color": [0.1, 0.1, 0.8]},\r\n        {"name": "green_bottle", "pos": [0.9, 0.0, 0.85], "color": [0.1, 0.8, 0.1]},\r\n    ]\r\n\r\n    for obj in objects:\r\n        prim_utils.create_prim(\r\n            f"/World/{obj[\'name\']}",\r\n            "Cylinder",\r\n            position=obj[\'pos\'],\r\n            scale=[0.04, 0.04, 0.1]\r\n        )\r\n        # Apply material with color\r\n\r\n\r\nif __name__ == "__main__":\r\n    world, robot = setup_humanoid_scene()\r\n    world.reset()\r\n\r\n    # Run simulation\r\n    while simulation_app.is_running():\r\n        world.step(render=True)\r\n\r\n    simulation_app.close()\n'})}),"\n",(0,t.jsx)(n.h3,{id:"urdf-to-usd-conversion",children:"URDF to USD Conversion"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from omni.isaac.urdf import _urdf\r\n\r\ndef convert_urdf_to_usd():\r\n    """Convert humanoid URDF to USD format."""\r\n\r\n    urdf_interface = _urdf.acquire_urdf_interface()\r\n\r\n    # Configure import settings\r\n    import_config = _urdf.ImportConfig()\r\n    import_config.merge_fixed_joints = False\r\n    import_config.fix_base = False\r\n    import_config.import_inertia_tensor = True\r\n    import_config.self_collision = False\r\n    import_config.density = 1000.0\r\n    import_config.default_drive_type = _urdf.UrdfJointTargetType.JOINT_DRIVE_POSITION\r\n\r\n    # Convert\r\n    result = urdf_interface.parse_urdf(\r\n        "/path/to/humanoid.urdf",\r\n        import_config\r\n    )\r\n\r\n    urdf_interface.import_robot(\r\n        "/path/to/humanoid.urdf",\r\n        result,\r\n        import_config,\r\n        "/World/humanoid"\r\n    )\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"sensors",children:"Sensor Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"camera-setup",children:"Camera Setup"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from omni.isaac.sensor import Camera\r\nimport omni.replicator.core as rep\r\n\r\ndef setup_cameras(robot_prim_path: str):\r\n    """Configure cameras on humanoid head."""\r\n\r\n    # RGB-D Camera (head mounted)\r\n    head_camera = Camera(\r\n        prim_path=f"{robot_prim_path}/head_link/rgbd_camera",\r\n        frequency=30,\r\n        resolution=(640, 480)\r\n    )\r\n\r\n    # Configure camera properties\r\n    head_camera.set_focal_length(1.93)  # mm\r\n    head_camera.set_focus_distance(0.5)  # m\r\n    head_camera.set_horizontal_aperture(2.65)\r\n\r\n    # Enable depth\r\n    head_camera.add_depth_to_frame()\r\n\r\n    # Stereo cameras for VSLAM\r\n    left_stereo = Camera(\r\n        prim_path=f"{robot_prim_path}/head_link/left_camera",\r\n        frequency=30,\r\n        resolution=(640, 480)\r\n    )\r\n\r\n    right_stereo = Camera(\r\n        prim_path=f"{robot_prim_path}/head_link/right_camera",\r\n        frequency=30,\r\n        resolution=(640, 480)\r\n    )\r\n\r\n    return head_camera, left_stereo, right_stereo\r\n\r\n\r\ndef create_ros2_camera_publishers(cameras):\r\n    """Create ROS 2 publishers for camera data."""\r\n    import omni.isaac.ros2_bridge as ros2_bridge\r\n\r\n    # RGB publisher\r\n    rgb_pub = ros2_bridge.create_camera_publisher(\r\n        cameras[0],\r\n        topic="/camera/rgb",\r\n        frame_id="head_camera_optical_frame"\r\n    )\r\n\r\n    # Depth publisher\r\n    depth_pub = ros2_bridge.create_depth_publisher(\r\n        cameras[0],\r\n        topic="/camera/depth",\r\n        frame_id="head_camera_optical_frame"\r\n    )\r\n\r\n    # Stereo publishers\r\n    left_pub = ros2_bridge.create_camera_publisher(\r\n        cameras[1],\r\n        topic="/camera/left/image",\r\n        frame_id="left_camera_optical_frame"\r\n    )\r\n\r\n    right_pub = ros2_bridge.create_camera_publisher(\r\n        cameras[2],\r\n        topic="/camera/right/image",\r\n        frame_id="right_camera_optical_frame"\r\n    )\r\n\r\n    return [rgb_pub, depth_pub, left_pub, right_pub]\n'})}),"\n",(0,t.jsx)(n.h3,{id:"lidar-setup",children:"LiDAR Setup"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from omni.isaac.sensor import LidarRtx\r\n\r\ndef setup_lidar(robot_prim_path: str):\r\n    """Configure LiDAR sensor."""\r\n\r\n    lidar = LidarRtx(\r\n        prim_path=f"{robot_prim_path}/base_link/lidar",\r\n        name="base_lidar",\r\n        rotation_rate=20.0,  # Hz\r\n        high_lod=True,\r\n        horizontal_fov=360.0,\r\n        horizontal_resolution=0.4,\r\n        vertical_fov=30.0,\r\n        vertical_resolution=4.0,\r\n        min_range=0.1,\r\n        max_range=100.0\r\n    )\r\n\r\n    return lidar\r\n\r\n\r\ndef create_ros2_lidar_publisher(lidar):\r\n    """Create ROS 2 publisher for LiDAR data."""\r\n    import omni.isaac.ros2_bridge as ros2_bridge\r\n\r\n    scan_pub = ros2_bridge.create_laser_scan_publisher(\r\n        lidar,\r\n        topic="/scan",\r\n        frame_id="lidar_link"\r\n    )\r\n\r\n    pointcloud_pub = ros2_bridge.create_point_cloud_publisher(\r\n        lidar,\r\n        topic="/points",\r\n        frame_id="lidar_link"\r\n    )\r\n\r\n    return scan_pub, pointcloud_pub\n'})}),"\n",(0,t.jsx)(n.h3,{id:"imu-setup",children:"IMU Setup"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from omni.isaac.sensor import IMUSensor\r\n\r\ndef setup_imu(robot_prim_path: str):\r\n    """Configure IMU sensor."""\r\n\r\n    imu = IMUSensor(\r\n        prim_path=f"{robot_prim_path}/torso_link/imu",\r\n        name="torso_imu",\r\n        frequency=200,  # Hz\r\n        linear_acceleration_filter_size=10,\r\n        angular_velocity_filter_size=10,\r\n        orientation_filter_size=10\r\n    )\r\n\r\n    return imu\r\n\r\n\r\ndef create_ros2_imu_publisher(imu):\r\n    """Create ROS 2 publisher for IMU data."""\r\n    import omni.isaac.ros2_bridge as ros2_bridge\r\n\r\n    imu_pub = ros2_bridge.create_imu_publisher(\r\n        imu,\r\n        topic="/imu",\r\n        frame_id="imu_link"\r\n    )\r\n\r\n    return imu_pub\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"isaac-ros",children:"Isaac ROS Integration"}),"\n",(0,t.jsx)(n.h3,{id:"perception-pipeline-launch",children:"Perception Pipeline Launch"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# launch/perception_pipeline.launch.py\r\n\r\nfrom launch import LaunchDescription\r\nfrom launch_ros.actions import Node, ComposableNodeContainer\r\nfrom launch_ros.descriptions import ComposableNode\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        # Visual SLAM\r\n        ComposableNodeContainer(\r\n            name='visual_slam_container',\r\n            namespace='',\r\n            package='rclcpp_components',\r\n            executable='component_container_mt',\r\n            composable_node_descriptions=[\r\n                ComposableNode(\r\n                    package='isaac_ros_visual_slam',\r\n                    plugin='nvidia::isaac_ros::visual_slam::VisualSlamNode',\r\n                    name='visual_slam_node',\r\n                    parameters=[{\r\n                        'enable_imu_fusion': True,\r\n                        'gyro_noise_density': 0.00016,\r\n                        'gyro_random_walk': 0.000022,\r\n                        'accel_noise_density': 0.0017,\r\n                        'accel_random_walk': 0.00019,\r\n                        'calibration_frequency': 200.0,\r\n                    }],\r\n                    remappings=[\r\n                        ('stereo_camera/left/image', '/camera/left/image'),\r\n                        ('stereo_camera/right/image', '/camera/right/image'),\r\n                        ('visual_slam/imu', '/imu'),\r\n                    ]\r\n                ),\r\n            ],\r\n        ),\r\n\r\n        # Object Detection\r\n        ComposableNodeContainer(\r\n            name='detection_container',\r\n            namespace='',\r\n            package='rclcpp_components',\r\n            executable='component_container_mt',\r\n            composable_node_descriptions=[\r\n                # Image encoding for detection\r\n                ComposableNode(\r\n                    package='isaac_ros_dnn_image_encoder',\r\n                    plugin='nvidia::isaac_ros::dnn_inference::DnnImageEncoderNode',\r\n                    name='dnn_image_encoder',\r\n                    parameters=[{\r\n                        'input_image_width': 640,\r\n                        'input_image_height': 480,\r\n                        'network_image_width': 640,\r\n                        'network_image_height': 480,\r\n                    }],\r\n                    remappings=[\r\n                        ('image', '/camera/rgb'),\r\n                    ]\r\n                ),\r\n\r\n                # Detection inference\r\n                ComposableNode(\r\n                    package='isaac_ros_detectnet',\r\n                    plugin='nvidia::isaac_ros::detectnet::DetectNetDecoderNode',\r\n                    name='detectnet_decoder',\r\n                    parameters=[{\r\n                        'label_list': ['mug', 'box', 'bottle', 'book'],\r\n                        'confidence_threshold': 0.5,\r\n                    }]\r\n                ),\r\n            ],\r\n        ),\r\n    ])\n"})}),"\n",(0,t.jsx)(n.h3,{id:"robot-control-interface",children:"Robot Control Interface"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"ROS 2 control interface for humanoid in Isaac Sim.\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import JointState\r\nfrom geometry_msgs.msg import Twist\r\nfrom trajectory_msgs.msg import JointTrajectory, JointTrajectoryPoint\r\nimport numpy as np\r\n\r\n\r\nclass HumanoidController(Node):\r\n    \"\"\"Control interface for humanoid robot.\"\"\"\r\n\r\n    def __init__(self):\r\n        super().__init__('humanoid_controller')\r\n\r\n        # Joint names\r\n        self.arm_joints = {\r\n            'left': [f'left_arm_joint_{i}' for i in range(1, 8)],\r\n            'right': [f'right_arm_joint_{i}' for i in range(1, 8)]\r\n        }\r\n        self.gripper_joints = {\r\n            'left': ['left_gripper_joint_1', 'left_gripper_joint_2'],\r\n            'right': ['right_gripper_joint_1', 'right_gripper_joint_2']\r\n        }\r\n\r\n        # Publishers\r\n        self.cmd_vel_pub = self.create_publisher(\r\n            Twist, '/cmd_vel', 10\r\n        )\r\n        self.left_arm_pub = self.create_publisher(\r\n            JointTrajectory, '/left_arm_controller/joint_trajectory', 10\r\n        )\r\n        self.right_arm_pub = self.create_publisher(\r\n            JointTrajectory, '/right_arm_controller/joint_trajectory', 10\r\n        )\r\n\r\n        # Subscribers\r\n        self.joint_state_sub = self.create_subscription(\r\n            JointState, '/joint_states', self.joint_state_callback, 10\r\n        )\r\n\r\n        self.current_joint_state = None\r\n\r\n    def joint_state_callback(self, msg: JointState):\r\n        \"\"\"Store current joint states.\"\"\"\r\n        self.current_joint_state = msg\r\n\r\n    def move_base(self, linear_x: float, angular_z: float):\r\n        \"\"\"Send velocity command to mobile base.\"\"\"\r\n        twist = Twist()\r\n        twist.linear.x = linear_x\r\n        twist.angular.z = angular_z\r\n        self.cmd_vel_pub.publish(twist)\r\n\r\n    def move_arm(\r\n        self,\r\n        arm: str,\r\n        positions: list,\r\n        duration: float = 2.0\r\n    ):\r\n        \"\"\"Send trajectory to arm.\"\"\"\r\n        if arm not in ['left', 'right']:\r\n            raise ValueError(\"arm must be 'left' or 'right'\")\r\n\r\n        traj = JointTrajectory()\r\n        traj.joint_names = self.arm_joints[arm]\r\n\r\n        point = JointTrajectoryPoint()\r\n        point.positions = positions\r\n        point.time_from_start.sec = int(duration)\r\n        point.time_from_start.nanosec = int((duration % 1) * 1e9)\r\n\r\n        traj.points = [point]\r\n\r\n        if arm == 'left':\r\n            self.left_arm_pub.publish(traj)\r\n        else:\r\n            self.right_arm_pub.publish(traj)\r\n\r\n    def get_arm_positions(self, arm: str) -> list:\r\n        \"\"\"Get current arm joint positions.\"\"\"\r\n        if self.current_joint_state is None:\r\n            return None\r\n\r\n        joint_names = self.arm_joints[arm]\r\n        positions = []\r\n\r\n        for name in joint_names:\r\n            if name in self.current_joint_state.name:\r\n                idx = self.current_joint_state.name.index(name)\r\n                positions.append(self.current_joint_state.position[idx])\r\n\r\n        return positions if len(positions) == 7 else None\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"verification",children:"Verification Tests"}),"\n",(0,t.jsx)(n.h3,{id:"sensor-data-flow-test",children:"Sensor Data Flow Test"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"Verify sensor data is flowing correctly.\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import Image, LaserScan, Imu, JointState\r\nfrom nav_msgs.msg import Odometry\r\n\r\n\r\nclass SensorVerificationNode(Node):\r\n    \"\"\"Verify all sensor topics are publishing.\"\"\"\r\n\r\n    def __init__(self):\r\n        super().__init__('sensor_verification')\r\n\r\n        self.received = {\r\n            'rgb': False,\r\n            'depth': False,\r\n            'scan': False,\r\n            'imu': False,\r\n            'joint_states': False,\r\n            'odom': False,\r\n        }\r\n\r\n        # Subscribers\r\n        self.create_subscription(Image, '/camera/rgb', self.rgb_callback, 10)\r\n        self.create_subscription(Image, '/camera/depth', self.depth_callback, 10)\r\n        self.create_subscription(LaserScan, '/scan', self.scan_callback, 10)\r\n        self.create_subscription(Imu, '/imu', self.imu_callback, 10)\r\n        self.create_subscription(JointState, '/joint_states', self.joint_callback, 10)\r\n        self.create_subscription(Odometry, '/odom', self.odom_callback, 10)\r\n\r\n        # Verification timer\r\n        self.create_timer(1.0, self.verify_callback)\r\n\r\n    def rgb_callback(self, msg): self.received['rgb'] = True\r\n    def depth_callback(self, msg): self.received['depth'] = True\r\n    def scan_callback(self, msg): self.received['scan'] = True\r\n    def imu_callback(self, msg): self.received['imu'] = True\r\n    def joint_callback(self, msg): self.received['joint_states'] = True\r\n    def odom_callback(self, msg): self.received['odom'] = True\r\n\r\n    def verify_callback(self):\r\n        \"\"\"Report sensor status.\"\"\"\r\n        all_received = all(self.received.values())\r\n\r\n        self.get_logger().info(\"Sensor Status:\")\r\n        for sensor, received in self.received.items():\r\n            status = \"OK\" if received else \"MISSING\"\r\n            self.get_logger().info(f\"  {sensor}: {status}\")\r\n\r\n        if all_received:\r\n            self.get_logger().info(\"All sensors operational!\")\r\n        else:\r\n            missing = [s for s, r in self.received.items() if not r]\r\n            self.get_logger().warn(f\"Missing sensors: {missing}\")\r\n\r\n\r\ndef main():\r\n    rclpy.init()\r\n    node = SensorVerificationNode()\r\n    rclpy.spin(node)\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"robot-control-test",children:"Robot Control Test"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""Test robot control interfaces."""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nimport time\r\n\r\n\r\nclass ControlTestNode(Node):\r\n    """Test robot control functionality."""\r\n\r\n    def __init__(self):\r\n        super().__init__(\'control_test\')\r\n\r\n        self.controller = HumanoidController()\r\n        self.test_timer = self.create_timer(2.0, self.run_tests)\r\n        self.test_phase = 0\r\n\r\n    def run_tests(self):\r\n        """Run through control tests."""\r\n        if self.test_phase == 0:\r\n            self.get_logger().info("Test 1: Base forward motion")\r\n            self.controller.move_base(0.1, 0.0)\r\n            self.test_phase = 1\r\n\r\n        elif self.test_phase == 1:\r\n            self.get_logger().info("Test 2: Base rotation")\r\n            self.controller.move_base(0.0, 0.3)\r\n            self.test_phase = 2\r\n\r\n        elif self.test_phase == 2:\r\n            self.get_logger().info("Test 3: Stop base")\r\n            self.controller.move_base(0.0, 0.0)\r\n            self.test_phase = 3\r\n\r\n        elif self.test_phase == 3:\r\n            self.get_logger().info("Test 4: Left arm home position")\r\n            home = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\r\n            self.controller.move_arm(\'left\', home)\r\n            self.test_phase = 4\r\n\r\n        elif self.test_phase == 4:\r\n            self.get_logger().info("Test 5: Left arm extended")\r\n            extended = [0.0, 0.5, 0.0, -1.0, 0.0, 0.5, 0.0]\r\n            self.controller.move_arm(\'left\', extended)\r\n            self.test_phase = 5\r\n\r\n        elif self.test_phase == 5:\r\n            self.get_logger().info("All tests complete!")\r\n            self.test_timer.cancel()\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"This chapter covered humanoid robot setup in Isaac Sim:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"URDF construction"})," with mobile base, dual 7-DOF arms, grippers, and sensors."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Isaac Sim import"})," using URDF-to-USD conversion and scene configuration."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Sensor setup"})," including RGB-D cameras, stereo cameras, LiDAR, and IMU."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Isaac ROS integration"})," for perception pipelines and robot control."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Verification tests"})," confirm sensor data flow and control interfaces."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"setup-checklist",children:"Setup Checklist"}),"\n",(0,t.jsx)(n.p,{children:"Before proceeding, verify:"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Humanoid URDF builds without errors"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Robot imports correctly in Isaac Sim"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All sensors publishing data at expected rates"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Joint state feedback received"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Base velocity commands move the robot"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Arm trajectory commands execute smoothly"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.a,{href:"/capstone/chapter-3-navigation",children:"Chapter 3: Navigation System"}),", you'll implement VSLAM-based navigation with obstacle avoidance using the configured sensors."]})]})}function m(r={}){const{wrapper:n}={...(0,a.R)(),...r.components};return n?(0,t.jsx)(n,{...r,children:(0,t.jsx)(d,{...r})}):d(r)}},8453(r,n,e){e.d(n,{R:()=>o,x:()=>s});var i=e(6540);const t={},a=i.createContext(t);function o(r){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof r?r(n):{...n,...r}},[n,r])}function s(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:o(r.components),i.createElement(a.Provider,{value:n},r.children)}}}]);