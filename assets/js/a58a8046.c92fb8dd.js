"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2938],{1491(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"module-2/chapter-1-ros2-architecture","title":"Chapter 1: ROS 2 Architecture","description":"Chapter Goal","source":"@site/docs/module-2/chapter-1-ros2-architecture.md","sourceDirName":"module-2","slug":"/module-2/chapter-1-ros2-architecture","permalink":"/Master-Robotics-AI/textbook/module-2/chapter-1-ros2-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/HasnainCodeHub/Master-Robotics-AI/tree/main/docs/docs/module-2/chapter-1-ros2-architecture.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"chapter-1-ros2-architecture","title":"Chapter 1: ROS 2 Architecture","sidebar_label":"1. ROS 2 Architecture","sidebar_position":2},"sidebar":"textbookSidebar","previous":{"title":"Overview","permalink":"/Master-Robotics-AI/textbook/module-2/"},"next":{"title":"2. Topics & Pub/Sub","permalink":"/Master-Robotics-AI/textbook/module-2/chapter-2-topics-pubsub"}}');var i=s(4848),t=s(8453);const c={id:"chapter-1-ros2-architecture",title:"Chapter 1: ROS 2 Architecture",sidebar_label:"1. ROS 2 Architecture",sidebar_position:2},o="Chapter 1: ROS 2 Architecture and Physical Grounding",l={},d=[{value:"Chapter Goal",id:"chapter-goal",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Connecting Module 1 to ROS 2",id:"connecting-module-1-to-ros-2",level:2},{value:"The Communication Problem",id:"the-communication-problem",level:3},{value:"ROS 2 Architecture Overview",id:"architecture-overview",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Topics",id:"topics",level:3},{value:"Services",id:"services",level:3},{value:"Actions",id:"actions",level:3},{value:"DDS Middleware",id:"dds-middleware",level:3},{value:"Quality of Service (QoS) Policies",id:"qos-policies",level:2},{value:"Key QoS Policies",id:"key-qos-policies",level:3},{value:"Mapping Physical Requirements to QoS",id:"mapping-physical-requirements-to-qos",level:3},{value:"QoS Compatibility",id:"qos-compatibility",level:3},{value:"Development Environment Setup",id:"environment-setup",level:2},{value:"Installing ROS 2",id:"installing-ros-2",level:3},{value:"Verifying Installation",id:"verifying-installation",level:3},{value:"Creating a Workspace",id:"creating-a-workspace",level:3},{value:"Creating a Package",id:"creating-a-package",level:3},{value:"Command-Line Tools",id:"command-line-tools",level:2},{value:"Node Inspection",id:"node-inspection",level:3},{value:"Topic Inspection",id:"topic-inspection",level:3},{value:"Service Inspection",id:"service-inspection",level:3},{value:"Graph Visualization",id:"graph-visualization",level:3},{value:"The ROS 2 Computation Graph",id:"computation-graph",level:2},{value:"Example: Mobile Robot",id:"example-mobile-robot",level:3},{value:"Mapping to M1 Perception-Action Loop",id:"mapping-to-m1-perception-action-loop",level:3},{value:"Timing in the Graph",id:"timing-in-the-graph",level:3},{value:"Summary",id:"summary",level:2},{value:"Self-Assessment Questions",id:"self-assessment-questions",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-1-ros-2-architecture-and-physical-grounding",children:"Chapter 1: ROS 2 Architecture and Physical Grounding"})}),"\n",(0,i.jsx)(n.h2,{id:"chapter-goal",children:"Chapter Goal"}),"\n",(0,i.jsxs)(n.p,{children:["By the end of this chapter, you will understand ",(0,i.jsx)(n.strong,{children:"how ROS 2's architecture addresses the physical communication challenges identified in Module 1"}),", and you will have a working development environment ready for the hands-on chapters that follow."]}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"ID"}),(0,i.jsx)(n.th,{children:"Objective"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1.1"}),(0,i.jsx)(n.td,{children:"Explain why ROS 2's DDS-based architecture addresses real-time robotic communication needs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1.2"}),(0,i.jsx)(n.td,{children:"Configure and verify a ROS 2 development environment with rclpy"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1.3"}),(0,i.jsx)(n.td,{children:"Explain QoS policies and map them to physical sensor/actuator requirements"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1.4"}),(0,i.jsx)(n.td,{children:"Navigate the ROS 2 computation graph using command-line tools"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"connecting-module-1-to-ros-2",children:"Connecting Module 1 to ROS 2"}),"\n",(0,i.jsx)(n.p,{children:"In Module 1, you learned that physical robots face challenges that software-only systems don't:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sensors"})," produce data at fixed rates with noise and latency"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Actuators"})," have limited response times and physical constraints"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"The perception-action loop"})," must complete within timing budgets"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Physical time"})," doesn't wait for your software"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 is designed specifically to address these challenges. Let's see how."}),"\n",(0,i.jsx)(n.h3,{id:"the-communication-problem",children:"The Communication Problem"}),"\n",(0,i.jsx)(n.p,{children:"A robotic system has many components that need to communicate:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Camera  \u2502\u2500\u2500\u2500\u2500\u25ba\u2502 Detector\u2502\u2500\u2500\u2500\u2500\u25ba\u2502 Planner \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                                     \u2502\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502\r\n\u2502  LiDAR  \u2502\u2500\u2500\u2500\u2500\u25ba\u2502 Mapper  \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                     \u2502\r\n                     \u25bc\r\n               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n               \u2502 Control \u2502\u2500\u2500\u2500\u2500\u25ba\u2502 Motors  \u2502\r\n               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.p,{children:"Each connection has requirements:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Camera \u2192 Detector: high bandwidth, can drop frames"}),"\n",(0,i.jsx)(n.li,{children:"LiDAR \u2192 Mapper: must receive all scans"}),"\n",(0,i.jsx)(n.li,{children:"Control \u2192 Motors: strict timing, must not be delayed"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"ROS 2 provides a framework where you declare these requirements and the system ensures they're met."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"architecture-overview",children:"ROS 2 Architecture Overview"}),"\n",(0,i.jsx)(n.h3,{id:"nodes",children:"Nodes"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.strong,{children:"node"})," is a process that performs computation. Nodes are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Single-purpose (one node per function)"}),"\n",(0,i.jsx)(n.li,{children:"Independently restartable"}),"\n",(0,i.jsx)(n.li,{children:"Composable (can run in same process or separate)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Physical Grounding"}),": Each component of the perception-action loop from M1 Chapter 4 becomes a node. The sensor, perception, planning, and execution stages are separate nodes that communicate."]}),"\n",(0,i.jsx)(n.h3,{id:"topics",children:"Topics"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Topics"})," are named channels for streaming data:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Publishers send messages to a topic"}),"\n",(0,i.jsx)(n.li,{children:"Subscribers receive messages from a topic"}),"\n",(0,i.jsx)(n.li,{children:"Many-to-many: multiple publishers, multiple subscribers"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Physical Grounding"}),": Sensor data streams are topics. The IMU publishes to ",(0,i.jsx)(n.code,{children:"/imu/data"})," at 100 Hz. Any node needing IMU data subscribes."]}),"\n",(0,i.jsx)(n.h3,{id:"services",children:"Services"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Services"})," are named request/response operations:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Client sends a request"}),"\n",(0,i.jsx)(n.li,{children:"Server processes and returns response"}),"\n",(0,i.jsx)(n.li,{children:"One-to-one: each request goes to one server"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Physical Grounding"}),': Discrete operations like "calibrate sensor" or "open gripper" are services.']}),"\n",(0,i.jsx)(n.h3,{id:"actions",children:"Actions"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Actions"})," are named long-running operations with feedback:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Client sends a goal"}),"\n",(0,i.jsx)(n.li,{children:"Server executes, sending progress feedback"}),"\n",(0,i.jsx)(n.li,{children:"Client can monitor and cancel"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Physical Grounding"}),": Navigation goals and manipulation sequences are actions\u2014they take time, need progress updates, and may need cancellation."]}),"\n",(0,i.jsx)(n.h3,{id:"dds-middleware",children:"DDS Middleware"}),"\n",(0,i.jsxs)(n.p,{children:["ROS 2 uses ",(0,i.jsx)(n.strong,{children:"DDS (Data Distribution Service)"})," as its underlying communication layer:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Industry standard for real-time data distribution"}),"\n",(0,i.jsx)(n.li,{children:"Quality of Service (QoS) policies"}),"\n",(0,i.jsx)(n.li,{children:"Discovery and peer-to-peer communication"}),"\n",(0,i.jsx)(n.li,{children:"No central point of failure"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Physical Grounding"}),": DDS was designed for real-time systems. The QoS policies directly address the timing requirements from M1 Chapter 4."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"qos-policies",children:"Quality of Service (QoS) Policies"}),"\n",(0,i.jsx)(n.p,{children:"QoS policies let you specify communication requirements. ROS 2 enforces them."}),"\n",(0,i.jsx)(n.h3,{id:"key-qos-policies",children:"Key QoS Policies"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Policy"}),(0,i.jsx)(n.th,{children:"Options"}),(0,i.jsx)(n.th,{children:"Physical Meaning"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Reliability"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"RELIABLE"}),", ",(0,i.jsx)(n.code,{children:"BEST_EFFORT"})]}),(0,i.jsx)(n.td,{children:"Must every message arrive, or is latest-only OK?"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Durability"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"VOLATILE"}),", ",(0,i.jsx)(n.code,{children:"TRANSIENT_LOCAL"})]}),(0,i.jsx)(n.td,{children:"Should late subscribers get recent messages?"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Deadline"})}),(0,i.jsx)(n.td,{children:"Time duration"}),(0,i.jsx)(n.td,{children:"How often must messages arrive?"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Lifespan"})}),(0,i.jsx)(n.td,{children:"Time duration"}),(0,i.jsx)(n.td,{children:"How long is a message valid?"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"History"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"KEEP_LAST(n)"}),", ",(0,i.jsx)(n.code,{children:"KEEP_ALL"})]}),(0,i.jsx)(n.td,{children:"How many messages to buffer?"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"mapping-physical-requirements-to-qos",children:"Mapping Physical Requirements to QoS"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"From M1 Chapter 2 (Sensors)"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Sensor"}),(0,i.jsx)(n.th,{children:"Rate"}),(0,i.jsx)(n.th,{children:"Loss Tolerance"}),(0,i.jsx)(n.th,{children:"QoS Setting"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Camera (30 fps)"}),(0,i.jsx)(n.td,{children:"33 ms"}),(0,i.jsx)(n.td,{children:"Can drop frames"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"BEST_EFFORT"}),", ",(0,i.jsx)(n.code,{children:"KEEP_LAST(1)"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LiDAR (10 Hz)"}),(0,i.jsx)(n.td,{children:"100 ms"}),(0,i.jsx)(n.td,{children:"Need all scans"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"RELIABLE"}),", ",(0,i.jsx)(n.code,{children:"KEEP_LAST(10)"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IMU (100 Hz)"}),(0,i.jsx)(n.td,{children:"10 ms"}),(0,i.jsx)(n.td,{children:"Latest only"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"BEST_EFFORT"}),", ",(0,i.jsx)(n.code,{children:"KEEP_LAST(1)"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Emergency stop"}),(0,i.jsx)(n.td,{children:"Infrequent"}),(0,i.jsx)(n.td,{children:"Must not miss"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"RELIABLE"}),", ",(0,i.jsx)(n.code,{children:"TRANSIENT_LOCAL"})]})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"From M1 Chapter 3 (Actuators)"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Command"}),(0,i.jsx)(n.th,{children:"Tolerance"}),(0,i.jsx)(n.th,{children:"QoS Setting"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Velocity commands"}),(0,i.jsx)(n.td,{children:"Stale is dangerous"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"BEST_EFFORT"}),", ",(0,i.jsx)(n.code,{children:"LIFESPAN(100ms)"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Joint positions"}),(0,i.jsx)(n.td,{children:"Must arrive"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"RELIABLE"}),", ",(0,i.jsx)(n.code,{children:"DEADLINE(10ms)"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Gripper open/close"}),(0,i.jsx)(n.td,{children:"Must complete"}),(0,i.jsx)(n.td,{children:"Service (not topic)"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"qos-compatibility",children:"QoS Compatibility"}),"\n",(0,i.jsx)(n.p,{children:"Publisher and subscriber QoS must be compatible:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Publisher"}),(0,i.jsx)(n.th,{children:"Subscriber"}),(0,i.jsx)(n.th,{children:"Result"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RELIABLE"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RELIABLE"})}),(0,i.jsx)(n.td,{children:"OK"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RELIABLE"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"BEST_EFFORT"})}),(0,i.jsx)(n.td,{children:"OK"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"BEST_EFFORT"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RELIABLE"})}),(0,i.jsx)(n.td,{children:"FAIL - incompatible"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"BEST_EFFORT"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"BEST_EFFORT"})}),(0,i.jsx)(n.td,{children:"OK"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Physical Grounding"}),": If a safety-critical subscriber requires ",(0,i.jsx)(n.code,{children:"RELIABLE"})," but the sensor publishes ",(0,i.jsx)(n.code,{children:"BEST_EFFORT"}),", the connection fails. This is intentional\u2014it prevents misconfigured systems."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"environment-setup",children:"Development Environment Setup"}),"\n",(0,i.jsx)(n.h3,{id:"installing-ros-2",children:"Installing ROS 2"}),"\n",(0,i.jsxs)(n.p,{children:["For this course, we use ",(0,i.jsx)(n.strong,{children:"ROS 2 Humble"})," on ",(0,i.jsx)(n.strong,{children:"Ubuntu 22.04"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Set locale\r\nsudo apt update && sudo apt install locales\r\nsudo locale-gen en_US en_US.UTF-8\r\nsudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8\r\n\r\n# Add ROS 2 repository\r\nsudo apt install software-properties-common\r\nsudo add-apt-repository universe\r\nsudo apt update && sudo apt install curl -y\r\nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg\r\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null\r\n\r\n# Install ROS 2\r\nsudo apt update\r\nsudo apt install ros-humble-desktop python3-colcon-common-extensions\n'})}),"\n",(0,i.jsx)(n.h3,{id:"verifying-installation",children:"Verifying Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Source ROS 2\r\nsource /opt/ros/humble/setup.bash\r\n\r\n# Verify with ros2 doctor\r\nros2 doctor --report\r\n\r\n# Test basic communication\r\nros2 run demo_nodes_cpp talker &\r\nros2 run demo_nodes_cpp listener\n"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-workspace",children:"Creating a Workspace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create workspace directory\r\nmkdir -p ~/ros2_ws/src\r\ncd ~/ros2_ws\r\n\r\n# Build (even with empty src)\r\ncolcon build\r\n\r\n# Source workspace\r\nsource install/setup.bash\n"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-package",children:"Creating a Package"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\n\r\n# Create Python package\r\nros2 pkg create --build-type ament_python my_robot_pkg \\\r\n    --dependencies rclpy std_msgs sensor_msgs\r\n\r\n# Build\r\ncd ~/ros2_ws\r\ncolcon build --packages-select my_robot_pkg\r\nsource install/setup.bash\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"command-line-tools",children:"Command-Line Tools"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 provides tools to inspect running systems\u2014essential for debugging."}),"\n",(0,i.jsx)(n.h3,{id:"node-inspection",children:"Node Inspection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# List all running nodes\r\nros2 node list\r\n\r\n# Get info about a node\r\nros2 node info /talker\n"})}),"\n",(0,i.jsx)(n.h3,{id:"topic-inspection",children:"Topic Inspection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# List all topics\r\nros2 topic list\r\n\r\n# Show topic message type\r\nros2 topic info /chatter\r\n\r\n# Echo messages (see data)\r\nros2 topic echo /chatter\r\n\r\n# Check publication rate\r\nros2 topic hz /chatter\r\n\r\n# Check bandwidth\r\nros2 topic bw /chatter\n"})}),"\n",(0,i.jsx)(n.h3,{id:"service-inspection",children:"Service Inspection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# List all services\r\nros2 service list\r\n\r\n# Show service type\r\nros2 service type /spawn\r\n\r\n# Call a service\r\nros2 service call /spawn std_srvs/srv/Empty\n"})}),"\n",(0,i.jsx)(n.h3,{id:"graph-visualization",children:"Graph Visualization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Install rqt\r\nsudo apt install ros-humble-rqt ros-humble-rqt-graph\r\n\r\n# Launch graph visualizer\r\nrqt_graph\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Physical Grounding"}),": These tools let you verify that your system matches the perception-action loop diagram from M1. You can see which nodes exist, what topics connect them, and whether data is flowing at expected rates."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"computation-graph",children:"The ROS 2 Computation Graph"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"computation graph"})," is the network of nodes and their connections."]}),"\n",(0,i.jsx)(n.h3,{id:"example-mobile-robot",children:"Example: Mobile Robot"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n             \u2502  /camera_node \u2502\r\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                    \u2502 /camera/image\r\n                    \u25bc\r\n             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n             \u2502 /detector_node\u2502\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502 /planner_node \u2502\r\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                                          \u2502 /cmd_vel\r\n                                          \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502  /lidar_node \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502/controller_node\u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  /scan           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h3,{id:"mapping-to-m1-perception-action-loop",children:"Mapping to M1 Perception-Action Loop"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"M1 Component"}),(0,i.jsx)(n.th,{children:"ROS 2 Implementation"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Sensors"})}),(0,i.jsx)(n.td,{children:"Publisher nodes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Perception"})}),(0,i.jsx)(n.td,{children:"Subscriber + processing nodes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Planning"})}),(0,i.jsx)(n.td,{children:"Planning nodes (actions)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Execution"})}),(0,i.jsx)(n.td,{children:"Controller nodes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Actuators"})}),(0,i.jsx)(n.td,{children:"Subscriber nodes (or hardware interfaces)"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"timing-in-the-graph",children:"Timing in the Graph"}),"\n",(0,i.jsx)(n.p,{children:"Each arrow represents latency:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"/camera_node"})," \u2192 ",(0,i.jsx)(n.code,{children:"/detector_node"}),": message serialization + network + deserialization"]}),"\n",(0,i.jsx)(n.li,{children:"Processing within each node adds computation time"}),"\n",(0,i.jsx)(n.li,{children:"Total latency = sum of all edges + sum of all node processing"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Physical Grounding"}),": The latency budget from M1 Chapter 4 is now distributed across nodes and connections. QoS deadline policies can enforce that each stage meets its budget."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"This chapter connected Module 1's physical concepts to ROS 2's architecture:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"ROS 2's architecture"})," (nodes, topics, services, actions) maps directly to the perception-action loop components from Module 1."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"DDS middleware"})," provides real-time communication with Quality of Service guarantees."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"QoS policies"})," are the implementation of M1's physical constraints\u2014deadline enforces timing budgets, reliability matches sensor loss tolerance."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"The computation graph"})," is your perception-action loop made concrete, with nodes connected by typed messages."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Command-line tools"})," let you inspect and debug the running system, verifying that reality matches your design."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"self-assessment-questions",children:"Self-Assessment Questions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"DDS and Real-Time"}),": Explain how DDS's QoS policies address the timing requirements from M1 Chapter 4."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"QoS Selection"}),": A safety system must receive emergency stop commands with zero tolerance for missed messages. What QoS settings would you use? Why?"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Node Design"}),": Your perception-action loop from M1 has 5 stages. How would you decompose this into ROS 2 nodes? What are the tradeoffs of more vs fewer nodes?"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Tool Usage"}),": You suspect a node is publishing too slowly. Which command-line tools would you use to diagnose this?"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Graph Analysis"}),": Draw the computation graph for a robot that reads from a camera and LiDAR, fuses the data, plans a path, and sends velocity commands. Label each topic with the message type and expected QoS."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.a,{href:"/module-2/chapter-2-topics-pubsub",children:"Chapter 2: Topics and Publishers/Subscribers"}),", you'll implement the publish/subscribe pattern for sensor data streams, putting the QoS concepts from this chapter into practice."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>c,x:()=>o});var r=s(6540);const i={},t=r.createContext(i);function c(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);