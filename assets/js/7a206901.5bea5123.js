"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1547],{1017(e,r,n){n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"module-2/chapter-3-services","title":"Chapter 3: Services","description":"Chapter Goal","source":"@site/docs/module-2/chapter-3-services.md","sourceDirName":"module-2","slug":"/module-2/chapter-3-services","permalink":"/Master-Robotics-AI/textbook/module-2/chapter-3-services","draft":false,"unlisted":false,"editUrl":"https://github.com/HasnainCodeHub/Master-Robotics-AI/tree/main/docs/docs/module-2/chapter-3-services.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"chapter-3-services","title":"Chapter 3: Services","sidebar_label":"3. Services","sidebar_position":4},"sidebar":"textbookSidebar","previous":{"title":"2. Topics & Pub/Sub","permalink":"/Master-Robotics-AI/textbook/module-2/chapter-2-topics-pubsub"},"next":{"title":"4. Actions","permalink":"/Master-Robotics-AI/textbook/module-2/chapter-4-actions"}}');var i=n(4848),t=n(8453);const l={id:"chapter-3-services",title:"Chapter 3: Services",sidebar_label:"3. Services",sidebar_position:4},c="Chapter 3: Services for Synchronous Operations",o={},a=[{value:"Chapter Goal",id:"chapter-goal",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"When to Use Services",id:"when-to-use-services",level:2},{value:"Service Server Implementation",id:"service-server",level:2},{value:"Gripper Service Example",id:"gripper-service-example",level:3},{value:"Service Callback Requirements",id:"service-callback-requirements",level:3},{value:"Service Client Implementation",id:"service-client",level:2},{value:"Synchronous Client",id:"synchronous-client",level:3},{value:"Timeout Selection",id:"timeout-selection",level:3},{value:"Custom Service Types",id:"custom-services",level:2},{value:"Defining a Service Interface",id:"defining-a-service-interface",level:3},{value:"Using Custom Services",id:"using-custom-services",level:3},{value:"Error Handling Patterns",id:"error-handling",level:2},{value:"Server-Side Error Handling",id:"server-side-error-handling",level:3},{value:"Client-Side Error Handling",id:"client-side-error-handling",level:3},{value:"Topics vs Services: Decision Framework",id:"decision-framework",level:2},{value:"Decision Examples",id:"decision-examples",level:3},{value:"Summary",id:"summary",level:2},{value:"Self-Assessment Questions",id:"self-assessment-questions",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"chapter-3-services-for-synchronous-operations",children:"Chapter 3: Services for Synchronous Operations"})}),"\n",(0,i.jsx)(r.h2,{id:"chapter-goal",children:"Chapter Goal"}),"\n",(0,i.jsxs)(r.p,{children:["By the end of this chapter, you will be able to ",(0,i.jsx)(r.strong,{children:"implement the service pattern for discrete request/response operations"}),", with emphasis on configuration, calibration, and discrete actuator commands."]}),"\n",(0,i.jsx)(r.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(r.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"ID"}),(0,i.jsx)(r.th,{children:"Objective"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"3.1"}),(0,i.jsx)(r.td,{children:"Implement a service server that handles requests with proper error handling"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"3.2"}),(0,i.jsx)(r.td,{children:"Implement a service client with timeout handling and response validation"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"3.3"}),(0,i.jsx)(r.td,{children:"Design service interfaces for discrete robot operations"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"3.4"}),(0,i.jsx)(r.td,{children:"Choose between topics and services based on communication requirements"})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"when-to-use-services",children:"When to Use Services"}),"\n",(0,i.jsxs)(r.p,{children:["Topics are for continuous data streams. Services are for ",(0,i.jsx)(r.strong,{children:"discrete operations"}),":"]}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Use Topics When"}),(0,i.jsx)(r.th,{children:"Use Services When"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Data flows continuously"}),(0,i.jsx)(r.td,{children:"Operation happens once"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Many subscribers need data"}),(0,i.jsx)(r.td,{children:"One requester, one response"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Latest data matters"}),(0,i.jsx)(r.td,{children:"Specific result matters"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Loss is acceptable"}),(0,i.jsx)(r.td,{children:"Operation must complete"})]})]})]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Physical Grounding Examples"}),":"]}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Operation"}),(0,i.jsx)(r.th,{children:"Pattern"}),(0,i.jsx)(r.th,{children:"Why"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"IMU readings"}),(0,i.jsx)(r.td,{children:"Topic"}),(0,i.jsx)(r.td,{children:"Continuous, 100 Hz stream"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Calibrate IMU"}),(0,i.jsx)(r.td,{children:"Service"}),(0,i.jsx)(r.td,{children:"Discrete, wait for completion"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Motor velocity"}),(0,i.jsx)(r.td,{children:"Topic"}),(0,i.jsx)(r.td,{children:"Continuous commands"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Home the motor"}),(0,i.jsx)(r.td,{children:"Service"}),(0,i.jsx)(r.td,{children:"Discrete, wait until homed"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Camera images"}),(0,i.jsx)(r.td,{children:"Topic"}),(0,i.jsx)(r.td,{children:"Continuous stream"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Set camera exposure"}),(0,i.jsx)(r.td,{children:"Service"}),(0,i.jsx)(r.td,{children:"One-time configuration"})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"service-server",children:"Service Server Implementation"}),"\n",(0,i.jsx)(r.p,{children:"A service server waits for requests and returns responses."}),"\n",(0,i.jsx)(r.h3,{id:"gripper-service-example",children:"Gripper Service Example"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nGripper Service Server\r\n\r\nProvides open/close operations for a gripper.\r\nPhysical grounding: Timing based on M1 actuator response characteristics.\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_srvs.srv import SetBool\r\nimport time\r\n\r\n\r\nclass GripperService(Node):\r\n    """Service server for gripper operations."""\r\n\r\n    def __init__(self):\r\n        super().__init__(\'gripper_service\')\r\n\r\n        # Physical parameters from M1 actuator specifications\r\n        self.gripper_travel_time_sec = 2.0  # Time to open/close fully\r\n        self.gripper_state = False  # False = open, True = closed\r\n\r\n        # Create service server\r\n        self.srv = self.create_service(\r\n            SetBool,\r\n            \'gripper/command\',\r\n            self.gripper_callback\r\n        )\r\n\r\n        self.get_logger().info(\'Gripper service ready\')\r\n\r\n    def gripper_callback(self, request, response):\r\n        """\r\n        Handle gripper command.\r\n\r\n        Args:\r\n            request.data: True = close, False = open\r\n            response.success: True if operation completed\r\n            response.message: Status description\r\n        """\r\n        target_state = request.data\r\n        action = "close" if target_state else "open"\r\n\r\n        self.get_logger().info(f\'Gripper command: {action}\')\r\n\r\n        # Check if already in desired state\r\n        if target_state == self.gripper_state:\r\n            response.success = True\r\n            response.message = f\'Gripper already {action}ed\'\r\n            return response\r\n\r\n        # Simulate gripper motion (physical time from M1 specs)\r\n        # In real system, this would command the actuator and wait\r\n        self.get_logger().info(\r\n            f\'Moving gripper ({self.gripper_travel_time_sec}s)...\'\r\n        )\r\n        time.sleep(self.gripper_travel_time_sec)\r\n\r\n        # Update state\r\n        self.gripper_state = target_state\r\n\r\n        response.success = True\r\n        response.message = f\'Gripper {action}ed successfully\'\r\n        self.get_logger().info(response.message)\r\n\r\n        return response\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = GripperService()\r\n\r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        node.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,i.jsx)(r.h3,{id:"service-callback-requirements",children:"Service Callback Requirements"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Must return a response"}),": Every callback must return the response object"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Should handle errors"}),": Set ",(0,i.jsx)(r.code,{children:"response.success = False"})," on error"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Can take time"}),": Unlike topic callbacks, service callbacks can block"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Physical Grounding"}),": The 2-second gripper travel time comes from M1 actuator specifications. A pneumatic gripper might take 0.5s; a slow servo gripper might take 3s. Know your hardware."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"service-client",children:"Service Client Implementation"}),"\n",(0,i.jsx)(r.p,{children:"A service client sends requests and waits for responses."}),"\n",(0,i.jsx)(r.h3,{id:"synchronous-client",children:"Synchronous Client"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nGripper Service Client\r\n\r\nCalls gripper service with timeout handling.\r\nPhysical grounding: Timeout based on M1 actuator timing + safety margin.\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_srvs.srv import SetBool\r\n\r\n\r\nclass GripperClient(Node):\r\n    """Service client for gripper operations."""\r\n\r\n    def __init__(self):\r\n        super().__init__(\'gripper_client\')\r\n\r\n        # Create client\r\n        self.client = self.create_client(SetBool, \'gripper/command\')\r\n\r\n        # Wait for service to be available\r\n        while not self.client.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info(\'Waiting for gripper service...\')\r\n\r\n        self.get_logger().info(\'Gripper client ready\')\r\n\r\n    def send_command(self, close: bool, timeout_sec: float = 5.0) -> bool:\r\n        """\r\n        Send gripper command and wait for response.\r\n\r\n        Args:\r\n            close: True to close, False to open\r\n            timeout_sec: Maximum time to wait (from M1 specs + margin)\r\n\r\n        Returns:\r\n            True if operation succeeded\r\n        """\r\n        request = SetBool.Request()\r\n        request.data = close\r\n\r\n        action = "close" if close else "open"\r\n        self.get_logger().info(f\'Sending command: {action}\')\r\n\r\n        # Send request\r\n        future = self.client.call_async(request)\r\n\r\n        # Wait for response with timeout\r\n        rclpy.spin_until_future_complete(self, future, timeout_sec=timeout_sec)\r\n\r\n        if future.result() is None:\r\n            self.get_logger().error(\r\n                f\'Service call timed out after {timeout_sec}s\'\r\n            )\r\n            return False\r\n\r\n        response = future.result()\r\n\r\n        if response.success:\r\n            self.get_logger().info(f\'Success: {response.message}\')\r\n        else:\r\n            self.get_logger().error(f\'Failed: {response.message}\')\r\n\r\n        return response.success\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    client = GripperClient()\r\n\r\n    # Example usage: open, close, close again\r\n    client.send_command(close=False)  # Open\r\n    client.send_command(close=True)   # Close\r\n    client.send_command(close=True)   # Already closed\r\n\r\n    client.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,i.jsx)(r.h3,{id:"timeout-selection",children:"Timeout Selection"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Physical Grounding"}),": The timeout must be longer than the physical operation:"]}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Operation"}),(0,i.jsx)(r.th,{children:"Physical Time"}),(0,i.jsx)(r.th,{children:"Recommended Timeout"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Gripper open/close"}),(0,i.jsx)(r.td,{children:"2.0s"}),(0,i.jsx)(r.td,{children:"5.0s (2.5x margin)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Motor home"}),(0,i.jsx)(r.td,{children:"5.0s"}),(0,i.jsx)(r.td,{children:"15.0s (3x margin)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Sensor calibration"}),(0,i.jsx)(r.td,{children:"10.0s"}),(0,i.jsx)(r.td,{children:"30.0s (3x margin)"})]})]})]}),"\n",(0,i.jsx)(r.p,{children:"Too short: False failures when operation is still in progress\r\nToo long: System hangs on real failures"}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"custom-services",children:"Custom Service Types"}),"\n",(0,i.jsxs)(r.p,{children:["Standard services (",(0,i.jsx)(r.code,{children:"std_srvs"}),") cover basic cases. For complex operations, define custom types."]}),"\n",(0,i.jsx)(r.h3,{id:"defining-a-service-interface",children:"Defining a Service Interface"}),"\n",(0,i.jsxs)(r.p,{children:["Create file ",(0,i.jsx)(r.code,{children:"srv/CalibrateIMU.srv"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"# Request\r\nbool full_calibration  # True for full, False for quick\r\n---\r\n# Response\r\nbool success\r\nstring message\r\nfloat64 accel_bias_x\r\nfloat64 accel_bias_y\r\nfloat64 accel_bias_z\r\nfloat64 gyro_bias_x\r\nfloat64 gyro_bias_y\r\nfloat64 gyro_bias_z\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Structure"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Request fields above ",(0,i.jsx)(r.code,{children:"---"})]}),"\n",(0,i.jsxs)(r.li,{children:["Response fields below ",(0,i.jsx)(r.code,{children:"---"})]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"using-custom-services",children:"Using Custom Services"}),"\n",(0,i.jsx)(r.p,{children:"After building the package:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from my_robot_interfaces.srv import CalibrateIMU\r\n\r\n# Server\r\nself.srv = self.create_service(\r\n    CalibrateIMU,\r\n    'imu/calibrate',\r\n    self.calibrate_callback\r\n)\r\n\r\ndef calibrate_callback(self, request, response):\r\n    if request.full_calibration:\r\n        # Full calibration takes longer\r\n        response.accel_bias_x = self.measure_accel_bias_x()\r\n        # ... more measurements\r\n    else:\r\n        # Quick calibration\r\n        response.accel_bias_x = 0.0\r\n\r\n    response.success = True\r\n    response.message = 'Calibration complete'\r\n    return response\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"error-handling",children:"Error Handling Patterns"}),"\n",(0,i.jsx)(r.p,{children:"Robust service implementations handle errors gracefully."}),"\n",(0,i.jsx)(r.h3,{id:"server-side-error-handling",children:"Server-Side Error Handling"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'def gripper_callback(self, request, response):\r\n    try:\r\n        # Attempt operation\r\n        if not self.gripper_connected:\r\n            raise RuntimeError("Gripper not connected")\r\n\r\n        self.execute_gripper_motion(request.data)\r\n\r\n        response.success = True\r\n        response.message = "Operation completed"\r\n\r\n    except RuntimeError as e:\r\n        response.success = False\r\n        response.message = f"Error: {str(e)}"\r\n        self.get_logger().error(str(e))\r\n\r\n    except Exception as e:\r\n        response.success = False\r\n        response.message = "Internal error"\r\n        self.get_logger().error(f"Unexpected error: {e}")\r\n\r\n    return response  # Always return response\n'})}),"\n",(0,i.jsx)(r.h3,{id:"client-side-error-handling",children:"Client-Side Error Handling"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'def send_command(self, close: bool) -> bool:\r\n    # Check service availability\r\n    if not self.client.service_is_ready():\r\n        self.get_logger().error("Service not available")\r\n        return False\r\n\r\n    request = SetBool.Request()\r\n    request.data = close\r\n\r\n    try:\r\n        future = self.client.call_async(request)\r\n        rclpy.spin_until_future_complete(self, future, timeout_sec=5.0)\r\n\r\n        if future.result() is None:\r\n            self.get_logger().error("Service call failed (no response)")\r\n            return False\r\n\r\n        response = future.result()\r\n        return response.success\r\n\r\n    except Exception as e:\r\n        self.get_logger().error(f"Service call exception: {e}")\r\n        return False\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"decision-framework",children:"Topics vs Services: Decision Framework"}),"\n",(0,i.jsx)(r.p,{children:"Use this flowchart to decide:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"Is data continuous/streaming?\r\n\u251c\u2500\u2500 Yes \u2192 Use TOPIC\r\n\u2514\u2500\u2500 No \u2192 Is specific response needed?\r\n    \u251c\u2500\u2500 No \u2192 Use TOPIC (one-way, fire-and-forget)\r\n    \u2514\u2500\u2500 Yes \u2192 Does operation take significant time?\r\n        \u251c\u2500\u2500 No \u2192 Use SERVICE\r\n        \u2514\u2500\u2500 Yes \u2192 Need progress feedback?\r\n            \u251c\u2500\u2500 No \u2192 Use SERVICE\r\n            \u2514\u2500\u2500 Yes \u2192 Use ACTION (Chapter 4)\n"})}),"\n",(0,i.jsx)(r.h3,{id:"decision-examples",children:"Decision Examples"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Scenario"}),(0,i.jsx)(r.th,{children:"Analysis"}),(0,i.jsx)(r.th,{children:"Choice"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Publish robot pose at 50 Hz"}),(0,i.jsx)(r.td,{children:"Continuous stream"}),(0,i.jsx)(r.td,{children:"Topic"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Get current robot pose once"}),(0,i.jsx)(r.td,{children:"Need specific response, instant"}),(0,i.jsx)(r.td,{children:"Service"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Command gripper open"}),(0,i.jsx)(r.td,{children:"Need confirmation, <5s"}),(0,i.jsx)(r.td,{children:"Service"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Navigate to goal"}),(0,i.jsx)(r.td,{children:"Long duration, need progress"}),(0,i.jsx)(r.td,{children:"Action"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Emergency stop"}),(0,i.jsx)(r.td,{children:"One-way, fire-and-forget"}),(0,i.jsx)(r.td,{children:"Topic"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Set motor PID gains"}),(0,i.jsx)(r.td,{children:"Configuration, need confirmation"}),(0,i.jsx)(r.td,{children:"Service"})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(r.p,{children:"This chapter covered services for discrete operations:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Services"})," provide request/response communication for operations that happen once and need confirmation."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Service servers"})," handle requests in callbacks that can block\u2014use for operations like gripper commands and calibration."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Service clients"})," send requests and wait with timeouts\u2014timeouts should be based on physical operation duration plus safety margin."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Custom service types"})," enable rich request/response structures for complex operations."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Error handling"})," is critical\u2014both server and client must handle failures gracefully."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Topics vs Services"}),": continuous/streaming \u2192 topics; discrete/response-needed \u2192 services."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"self-assessment-questions",children:"Self-Assessment Questions"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Service Design"}),': Design a service interface for a robot arm "home" operation that moves all joints to zero position. What fields should be in request and response?']}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Timeout Selection"}),": A calibration procedure takes 10-15 seconds depending on sensor noise. What timeout would you set for the client? Why?"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Error Handling"}),': Your gripper service receives a "close" command but the gripper is already holding an object at maximum force. How should the server respond?']}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Pattern Selection"}),": You need to implement an emergency stop. Should you use a topic or service? Justify your choice."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Blocking Behavior"}),": A service callback takes 30 seconds to complete. What happens to other callbacks (topic subscriptions) on the same node during this time?"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,i.jsxs)(r.p,{children:["In ",(0,i.jsx)(r.a,{href:"/module-2/chapter-4-actions",children:"Chapter 4: Actions"}),", you'll implement the action pattern for long-running tasks that need progress feedback and cancellation support."]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,r,n){n.d(r,{R:()=>l,x:()=>c});var s=n(6540);const i={},t=s.createContext(i);function l(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);