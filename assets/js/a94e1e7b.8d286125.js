"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3529],{4526(n,e,r){r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"module-4/chapter-5-domain-randomization","title":"Chapter 5: Domain Randomization","description":"Chapter Goal","source":"@site/docs/module-4/chapter-5-domain-randomization.md","sourceDirName":"module-4","slug":"/module-4/chapter-5-domain-randomization","permalink":"/Master-Robotics-AI/textbook/module-4/chapter-5-domain-randomization","draft":false,"unlisted":false,"editUrl":"https://github.com/HasnainCodeHub/Master-Robotics-AI/tree/main/docs/docs/module-4/chapter-5-domain-randomization.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"chapter-5-domain-randomization","title":"Chapter 5: Domain Randomization","sidebar_label":"5. Domain Randomization","sidebar_position":6},"sidebar":"textbookSidebar","previous":{"title":"4. Visual SLAM","permalink":"/Master-Robotics-AI/textbook/module-4/chapter-4-visual-slam"},"next":{"title":"6. Sim-to-Real Transfer","permalink":"/Master-Robotics-AI/textbook/module-4/chapter-6-sim-to-real-transfer"}}');var t=r(4848),a=r(8453);const o={id:"chapter-5-domain-randomization",title:"Chapter 5: Domain Randomization",sidebar_label:"5. Domain Randomization",sidebar_position:6},s="Chapter 5: Domain Randomization and Synthetic Data",d={},l=[{value:"Chapter Goal",id:"chapter-goal",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Why Domain Randomization?",id:"why-domain-randomization",level:2},{value:"The Domain Gap Problem",id:"the-domain-gap-problem",level:3},{value:"The Randomization Solution",id:"the-randomization-solution",level:3},{value:"Isaac Replicator Architecture",id:"replicator",level:2},{value:"Basic Replicator Script",id:"basic-replicator-script",level:3},{value:"Visual Randomization",id:"visual",level:2},{value:"Texture Randomization",id:"texture-randomization",level:3},{value:"Material Property Randomization",id:"material-property-randomization",level:3},{value:"Physical Grounding",id:"physical-grounding",level:3},{value:"Lighting Randomization",id:"lighting",level:2},{value:"Light Intensity and Color",id:"light-intensity-and-color",level:3},{value:"Time of Day Simulation",id:"time-of-day-simulation",level:3},{value:"Additional Light Sources",id:"additional-light-sources",level:3},{value:"Physics Randomization",id:"physics",level:2},{value:"Friction Randomization",id:"friction-randomization",level:3},{value:"Mass and Inertia Randomization",id:"mass-and-inertia-randomization",level:3},{value:"Joint Parameter Randomization",id:"joint-parameter-randomization",level:3},{value:"Sensor Randomization",id:"sensor",level:2},{value:"Camera Parameter Randomization",id:"camera-parameter-randomization",level:3},{value:"Sensor Noise Randomization",id:"sensor-noise-randomization",level:3},{value:"Synthetic Dataset Generation",id:"dataset",level:2},{value:"Writer Configuration",id:"writer-configuration",level:3},{value:"Dataset Generation Loop",id:"dataset-generation-loop",level:3},{value:"Output Format",id:"output-format",level:3},{value:"Annotation Format",id:"annotation-format",level:3},{value:"When Randomization Helps (and Doesn&#39;t)",id:"limitations",level:2},{value:"Effective Against",id:"effective-against",level:3},{value:"Not Effective Against",id:"not-effective-against",level:3},{value:"Summary",id:"summary",level:2},{value:"Self-Assessment Questions",id:"self-assessment-questions",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}];function h(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"chapter-5-domain-randomization-and-synthetic-data",children:"Chapter 5: Domain Randomization and Synthetic Data"})}),"\n",(0,t.jsx)(e.h2,{id:"chapter-goal",children:"Chapter Goal"}),"\n",(0,t.jsxs)(e.p,{children:["By the end of this chapter, you will be able to ",(0,t.jsx)(e.strong,{children:"master domain randomization using Isaac Replicator"})," to generate robust perception systems that transfer from simulation to reality."]}),"\n",(0,t.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(e.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"ID"}),(0,t.jsx)(e.th,{children:"Objective"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"5.1"}),(0,t.jsx)(e.td,{children:"Explain why domain randomization improves sim-to-real transfer"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"5.2"}),(0,t.jsx)(e.td,{children:"Implement texture and material randomization"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"5.3"}),(0,t.jsx)(e.td,{children:"Implement lighting randomization"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"5.4"}),(0,t.jsx)(e.td,{children:"Implement physics randomization"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"5.5"}),(0,t.jsx)(e.td,{children:"Implement sensor noise randomization"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"5.6"}),(0,t.jsx)(e.td,{children:"Generate synthetic datasets with ground truth"})]})]})]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"why-domain-randomization",children:"Why Domain Randomization?"}),"\n",(0,t.jsx)(e.h3,{id:"the-domain-gap-problem",children:"The Domain Gap Problem"}),"\n",(0,t.jsx)(e.p,{children:"From Module 3, Chapter 6:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Training Distribution:        Real World Distribution:\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502    Simulation       \u2502       \u2502     Reality         \u2502\r\n\u2502    (narrow)         \u2502       \u2502     (broad)         \u2502\r\n\u2502                     \u2502       \u2502                     \u2502\r\n\u2502    \u25cf                \u2502       \u2502         \u25cf\u25cf\u25cf\u25cf\u25cf       \u2502\r\n\u2502  (one texture)      \u2502       \u2502  (many variations)  \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n              \u2502                         \u2502\r\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500 GAP \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(e.p,{children:"Models trained on narrow simulation fail when reality differs."}),"\n",(0,t.jsx)(e.h3,{id:"the-randomization-solution",children:"The Randomization Solution"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Randomized Training:          Real World:\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502    Many variations  \u2502       \u2502     Reality         \u2502\r\n\u2502    \u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf       \u2502       \u2502     (subset)        \u2502\r\n\u2502                     \u2502       \u2502                     \u2502\r\n\u2502    \u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf       \u2502       \u2502         \u25cf\u25cf\u25cf\u25cf\u25cf       \u2502\r\n\u2502    \u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf       \u2502       \u2502                     \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n              \u2502                         \u2502\r\n              \u2514\u2500\u2500\u2500\u2500\u2500 COVERED \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(e.p,{children:"If training covers enough variation, real-world becomes just another sample."}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"replicator",children:"Isaac Replicator Architecture"}),"\n",(0,t.jsx)(e.p,{children:"Isaac Replicator is the domain randomization tool in Isaac Sim:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502                    Isaac Replicator                              \u2502\r\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n\u2502                                                                  \u2502\r\n\u2502  Randomizers                    Writers                          \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502\r\n\u2502  \u2502 Texture          \u2502          \u2502 RGB Image        \u2502             \u2502\r\n\u2502  \u2502 Material         \u2502          \u2502 Depth Image      \u2502             \u2502\r\n\u2502  \u2502 Lighting         \u2502          \u2502 Segmentation     \u2502             \u2502\r\n\u2502  \u2502 Position         \u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u25ba \u2502 Bounding Boxes   \u2502             \u2502\r\n\u2502  \u2502 Physics          \u2502          \u2502 Pose Annotations \u2502             \u2502\r\n\u2502  \u2502 Sensor Params    \u2502          \u2502 Point Cloud      \u2502             \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502\r\n\u2502           \u2502                             \u2502                        \u2502\r\n\u2502           \u25bc                             \u25bc                        \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\r\n\u2502  \u2502               Synthetic Dataset                           \u2502   \u2502\r\n\u2502  \u2502  (Images + Annotations for Training)                      \u2502   \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\r\n\u2502                                                                  \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(e.h3,{id:"basic-replicator-script",children:"Basic Replicator Script"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import omni.replicator.core as rep\r\n\r\n# Setup scene\r\nrep.set_global_seed(42)\r\n\r\n# Define what to randomize\r\nwith rep.new_layer():\r\n    # Get objects to randomize\r\n    boxes = rep.get.prims(path_pattern="/World/Box_*")\r\n    floor = rep.get.prim(path="/World/Floor")\r\n\r\n    # Define randomization\r\n    with rep.trigger.on_frame():\r\n        with boxes:\r\n            rep.modify.pose(\r\n                position=rep.distribution.uniform((-2, -2, 0), (2, 2, 0)),\r\n                rotation=rep.distribution.uniform((0, 0, 0), (0, 0, 360))\r\n            )\r\n        with floor:\r\n            rep.modify.attribute(\r\n                name="material:diffuse_color",\r\n                value=rep.distribution.uniform((0.2, 0.2, 0.2), (0.8, 0.8, 0.8))\r\n            )\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"visual",children:"Visual Randomization"}),"\n",(0,t.jsx)(e.h3,{id:"texture-randomization",children:"Texture Randomization"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import omni.replicator.core as rep\r\n\r\n# Create texture randomizer\r\ntextures = [\r\n    "omniverse://localhost/NVIDIA/Materials/vMaterials_2/Wood/Wood_Plank.mdl",\r\n    "omniverse://localhost/NVIDIA/Materials/vMaterials_2/Concrete/Concrete.mdl",\r\n    "omniverse://localhost/NVIDIA/Materials/vMaterials_2/Metal/Brushed_Metal.mdl",\r\n]\r\n\r\nwith rep.trigger.on_frame():\r\n    floor = rep.get.prim(path="/World/Floor")\r\n    with floor:\r\n        rep.randomizer.texture(textures)\n'})}),"\n",(0,t.jsx)(e.h3,{id:"material-property-randomization",children:"Material Property Randomization"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with rep.trigger.on_frame():\r\n    objects = rep.get.prims(semantics=[("class", "target_object")])\r\n    with objects:\r\n        rep.modify.attribute(\r\n            # Albedo (base color)\r\n            name="material:albedo_color",\r\n            value=rep.distribution.uniform((0.1, 0.1, 0.1), (0.9, 0.9, 0.9))\r\n        )\r\n        rep.modify.attribute(\r\n            # Roughness affects reflections\r\n            name="material:roughness",\r\n            value=rep.distribution.uniform(0.3, 0.9)\r\n        )\r\n        rep.modify.attribute(\r\n            # Metallic appearance\r\n            name="material:metallic",\r\n            value=rep.distribution.uniform(0.0, 0.3)\r\n        )\n'})}),"\n",(0,t.jsx)(e.h3,{id:"physical-grounding",children:"Physical Grounding"}),"\n",(0,t.jsx)(e.p,{children:"Material properties must stay physically plausible:"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Property"}),(0,t.jsx)(e.th,{children:"Physical Range"}),(0,t.jsx)(e.th,{children:"Why"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Roughness"}),(0,t.jsx)(e.td,{children:"0.3-0.9"}),(0,t.jsx)(e.td,{children:"< 0.3 unrealistically smooth"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Metallic"}),(0,t.jsx)(e.td,{children:"0.0-0.3"}),(0,t.jsx)(e.td,{children:"Non-metallic objects"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Albedo"}),(0,t.jsx)(e.td,{children:"0.1-0.9"}),(0,t.jsx)(e.td,{children:"Physically valid reflectance"})]})]})]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"lighting",children:"Lighting Randomization"}),"\n",(0,t.jsx)(e.h3,{id:"light-intensity-and-color",children:"Light Intensity and Color"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with rep.trigger.on_frame():\r\n    lights = rep.get.light()\r\n    with lights:\r\n        rep.modify.attribute(\r\n            name="intensity",\r\n            value=rep.distribution.uniform(500, 2000)\r\n        )\r\n        rep.modify.attribute(\r\n            name="color",\r\n            value=rep.distribution.uniform((0.8, 0.8, 0.9), (1.0, 1.0, 1.0))\r\n        )\n'})}),"\n",(0,t.jsx)(e.h3,{id:"time-of-day-simulation",children:"Time of Day Simulation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'# Simulate different times of day\r\ndef create_lighting_presets():\r\n    presets = {\r\n        "morning": {"intensity": 800, "color": (1.0, 0.95, 0.8), "angle": 30},\r\n        "noon": {"intensity": 2000, "color": (1.0, 1.0, 1.0), "angle": 80},\r\n        "afternoon": {"intensity": 1200, "color": (1.0, 0.9, 0.7), "angle": 50},\r\n        "evening": {"intensity": 600, "color": (1.0, 0.8, 0.6), "angle": 20},\r\n    }\r\n    return presets\r\n\r\nwith rep.trigger.on_frame():\r\n    sun = rep.get.light(path="/World/Sun")\r\n    preset = rep.distribution.choice(list(create_lighting_presets().values()))\r\n    with sun:\r\n        rep.modify.attribute(name="intensity", value=preset["intensity"])\r\n        rep.modify.attribute(name="color", value=preset["color"])\n'})}),"\n",(0,t.jsx)(e.h3,{id:"additional-light-sources",children:"Additional Light Sources"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'# Randomize number and position of point lights\r\nwith rep.trigger.on_frame():\r\n    # Remove existing random lights\r\n    rep.delete.prims(path_pattern="/World/RandomLight_*")\r\n\r\n    # Create 1-5 random lights\r\n    num_lights = rep.distribution.uniform(1, 5)\r\n    for i in range(int(num_lights)):\r\n        rep.create.light(\r\n            light_type="sphere",\r\n            position=rep.distribution.uniform((-5, -5, 2), (5, 5, 4)),\r\n            intensity=rep.distribution.uniform(100, 500),\r\n            color=rep.distribution.uniform((0.9, 0.9, 0.9), (1.0, 1.0, 1.0))\r\n        )\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"physics",children:"Physics Randomization"}),"\n",(0,t.jsx)(e.h3,{id:"friction-randomization",children:"Friction Randomization"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with rep.trigger.on_frame():\r\n    floor = rep.get.prim(path="/World/Floor")\r\n    with floor:\r\n        rep.physics.attribute(\r\n            name="physics:staticFriction",\r\n            value=rep.distribution.uniform(0.3, 1.0)\r\n        )\r\n        rep.physics.attribute(\r\n            name="physics:dynamicFriction",\r\n            value=rep.distribution.uniform(0.3, 0.9)\r\n        )\n'})}),"\n",(0,t.jsx)(e.h3,{id:"mass-and-inertia-randomization",children:"Mass and Inertia Randomization"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with rep.trigger.on_frame():\r\n    objects = rep.get.prims(semantics=[("class", "manipulatable")])\r\n    with objects:\r\n        # \xb120% mass variation (manufacturing tolerance)\r\n        base_mass = 1.0  # kg\r\n        rep.physics.attribute(\r\n            name="physics:mass",\r\n            value=rep.distribution.uniform(base_mass * 0.8, base_mass * 1.2)\r\n        )\n'})}),"\n",(0,t.jsx)(e.h3,{id:"joint-parameter-randomization",children:"Joint Parameter Randomization"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with rep.trigger.on_frame():\r\n    joints = rep.get.prims(path_pattern="/World/Robot/*/joint_*")\r\n    with joints:\r\n        # Damping variation\r\n        rep.physics.attribute(\r\n            name="physics:damping",\r\n            value=rep.distribution.uniform(0.1, 0.5)\r\n        )\r\n        # Friction variation\r\n        rep.physics.attribute(\r\n            name="physics:jointFriction",\r\n            value=rep.distribution.uniform(0.01, 0.1)\r\n        )\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Physical Grounding"}),": Ranges should match physical possibilities:"]}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Parameter"}),(0,t.jsx)(e.th,{children:"Range"}),(0,t.jsx)(e.th,{children:"Physical Basis"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Floor friction"}),(0,t.jsx)(e.td,{children:"0.3-1.0"}),(0,t.jsx)(e.td,{children:"Tile to rubber"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Mass"}),(0,t.jsx)(e.td,{children:"\xb120%"}),(0,t.jsx)(e.td,{children:"Manufacturing tolerance"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Joint damping"}),(0,t.jsx)(e.td,{children:"0.1-0.5"}),(0,t.jsx)(e.td,{children:"Lubrication variation"})]})]})]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"sensor",children:"Sensor Randomization"}),"\n",(0,t.jsx)(e.h3,{id:"camera-parameter-randomization",children:"Camera Parameter Randomization"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with rep.trigger.on_frame():\r\n    camera = rep.get.camera(path="/World/Robot/Camera")\r\n    with camera:\r\n        # Exposure variation\r\n        rep.modify.attribute(\r\n            name="camera:exposure",\r\n            value=rep.distribution.uniform(-1.0, 1.0)\r\n        )\r\n        # Focal length variation (zoom)\r\n        rep.modify.attribute(\r\n            name="camera:focalLength",\r\n            value=rep.distribution.uniform(1.8, 2.1)  # mm\r\n        )\n'})}),"\n",(0,t.jsx)(e.h3,{id:"sensor-noise-randomization",children:"Sensor Noise Randomization"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with rep.trigger.on_frame():\r\n    camera = rep.get.camera(path="/World/Robot/Camera")\r\n    with camera:\r\n        # Noise level variation\r\n        rep.modify.attribute(\r\n            name="camera:noiseStdDev",\r\n            value=rep.distribution.uniform(0.005, 0.02)\r\n        )\r\n\r\n    lidar = rep.get.sensor(path="/World/Robot/LiDAR")\r\n    with lidar:\r\n        # LiDAR range noise variation\r\n        rep.modify.attribute(\r\n            name="lidar:rangeNoiseStdDev",\r\n            value=rep.distribution.uniform(0.01, 0.05)\r\n        )\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"dataset",children:"Synthetic Dataset Generation"}),"\n",(0,t.jsx)(e.h3,{id:"writer-configuration",children:"Writer Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import omni.replicator.core as rep\r\n\r\n# Configure output\r\nwriter = rep.WriterRegistry.get("BasicWriter")\r\nwriter.initialize(\r\n    output_dir="./synthetic_dataset",\r\n    rgb=True,\r\n    depth=True,\r\n    semantic_segmentation=True,\r\n    instance_segmentation=True,\r\n    bounding_box_2d_tight=True,\r\n)\r\n\r\n# Attach to render products\r\nrender_product = rep.create.render_product(\r\n    camera="/World/Robot/Camera",\r\n    resolution=(640, 480)\r\n)\r\nwriter.attach([render_product])\n'})}),"\n",(0,t.jsx)(e.h3,{id:"dataset-generation-loop",children:"Dataset Generation Loop"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import omni.replicator.core as rep\r\n\r\n# Number of frames to generate\r\nNUM_FRAMES = 10000\r\n\r\n# Setup randomization\r\nwith rep.new_layer():\r\n    with rep.trigger.on_frame(num_frames=NUM_FRAMES):\r\n        # All randomizations here\r\n        boxes = rep.get.prims(path_pattern="/World/Box_*")\r\n        with boxes:\r\n            rep.modify.pose(\r\n                position=rep.distribution.uniform((-2, -2, 0), (2, 2, 0))\r\n            )\r\n            rep.randomizer.texture(textures)\r\n\r\n        # Lighting\r\n        lights = rep.get.light()\r\n        with lights:\r\n            rep.modify.attribute(\r\n                name="intensity",\r\n                value=rep.distribution.uniform(500, 2000)\r\n            )\r\n\r\n# Run generation\r\nrep.orchestrator.run()\n'})}),"\n",(0,t.jsx)(e.h3,{id:"output-format",children:"Output Format"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"synthetic_dataset/\r\n\u251c\u2500\u2500 rgb/\r\n\u2502   \u251c\u2500\u2500 rgb_000000.png\r\n\u2502   \u251c\u2500\u2500 rgb_000001.png\r\n\u2502   \u2514\u2500\u2500 ...\r\n\u251c\u2500\u2500 depth/\r\n\u2502   \u251c\u2500\u2500 depth_000000.npy\r\n\u2502   \u2514\u2500\u2500 ...\r\n\u251c\u2500\u2500 semantic_segmentation/\r\n\u2502   \u251c\u2500\u2500 semantic_000000.png\r\n\u2502   \u2514\u2500\u2500 ...\r\n\u251c\u2500\u2500 instance_segmentation/\r\n\u2502   \u251c\u2500\u2500 instance_000000.png\r\n\u2502   \u2514\u2500\u2500 ...\r\n\u2514\u2500\u2500 bounding_box_2d_tight/\r\n    \u251c\u2500\u2500 bbox_000000.json\r\n    \u2514\u2500\u2500 ...\n"})}),"\n",(0,t.jsx)(e.h3,{id:"annotation-format",children:"Annotation Format"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'// bbox_000000.json\r\n{\r\n  "annotations": [\r\n    {\r\n      "class": "box",\r\n      "instance_id": 1,\r\n      "bbox": [120, 80, 200, 160],  // x, y, width, height\r\n      "confidence": 1.0\r\n    },\r\n    {\r\n      "class": "shelf",\r\n      "instance_id": 2,\r\n      "bbox": [300, 50, 150, 400],\r\n      "confidence": 1.0\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"limitations",children:"When Randomization Helps (and Doesn't)"}),"\n",(0,t.jsx)(e.h3,{id:"effective-against",children:"Effective Against"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Gap Type"}),(0,t.jsx)(e.th,{children:"Randomization"}),(0,t.jsx)(e.th,{children:"Effectiveness"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Visual appearance"}),(0,t.jsx)(e.td,{children:"Texture, lighting"}),(0,t.jsx)(e.td,{children:"High"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Object positions"}),(0,t.jsx)(e.td,{children:"Pose randomization"}),(0,t.jsx)(e.td,{children:"High"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Sensor noise levels"}),(0,t.jsx)(e.td,{children:"Noise parameter"}),(0,t.jsx)(e.td,{children:"High"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Friction variation"}),(0,t.jsx)(e.td,{children:"Physics params"}),(0,t.jsx)(e.td,{children:"Moderate"})]})]})]}),"\n",(0,t.jsx)(e.h3,{id:"not-effective-against",children:"Not Effective Against"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Gap Type"}),(0,t.jsx)(e.th,{children:"Why"}),(0,t.jsx)(e.th,{children:"Alternative"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Unmodeled physics"}),(0,t.jsx)(e.td,{children:"Can't randomize what's not modeled"}),(0,t.jsx)(e.td,{children:"System ID"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Systematic sensor bias"}),(0,t.jsx)(e.td,{children:"Randomization is around wrong mean"}),(0,t.jsx)(e.td,{children:"Calibration"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Missing phenomena"}),(0,t.jsx)(e.td,{children:"Not in simulation at all"}),(0,t.jsx)(e.td,{children:"Better simulation"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Fundamental domain shift"}),(0,t.jsx)(e.td,{children:"Too different to cover"}),(0,t.jsx)(e.td,{children:"Domain adaptation"})]})]})]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(e.p,{children:"This chapter covered domain randomization with Isaac Replicator:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Domain randomization"}),' trains models on varied conditions so real world is "just another sample."']}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Visual randomization"})," (textures, materials, lighting) addresses perception gap."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Physics randomization"})," (friction, mass, damping) addresses physics gap."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Sensor randomization"})," (noise, parameters) improves robustness to sensor variation."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Synthetic datasets"})," with ground truth annotations enable training perception models."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Limitations"})," exist\u2014randomization can't fix unmodeled phenomena."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"self-assessment-questions",children:"Self-Assessment Questions"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Randomization Design"}),": You're training an object detector for cardboard boxes. What visual properties would you randomize? What ranges?"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Physics Ranges"}),": Why randomize friction from 0.3-1.0 rather than 0-1.0? What physical principle constrains this?"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Sensor Noise"}),": Your real camera has different noise at different ISO settings. How would you represent this in randomization?"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Dataset Size"}),": How many synthetic images would you generate for training? What factors influence this decision?"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Limitation Analysis"}),": Your trained model works on all synthetic variations but fails on real images with motion blur. Why didn't randomization help?"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,t.jsxs)(e.p,{children:["In ",(0,t.jsx)(e.a,{href:"/module-4/chapter-6-sim-to-real-transfer",children:"Chapter 6: Sim-to-Real Transfer"}),", you'll synthesize all Module 4 capabilities into comprehensive transfer strategies, preparing for capstone integration and hardware deployment."]})]})}function c(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}},8453(n,e,r){r.d(e,{R:()=>o,x:()=>s});var i=r(6540);const t={},a=i.createContext(t);function o(n){const e=i.useContext(a);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);