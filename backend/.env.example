# ============================================
# RAILWAY DEPLOYMENT - PRODUCTION CONFIGURATION
# ============================================
# Copy this file to .env and fill in the values
# For Railway: Set these in the Railway dashboard (not .env file)

# --------------------------------------------
# Qdrant Cloud (Vector Database)
# --------------------------------------------
# Get from: https://cloud.qdrant.io
QDRANT_URL=https://xxx-xxx-xxx.qdrant.io
QDRANT_API_KEY=your_qdrant_api_key_here
QDRANT_COLLECTION=textbook_chunks

# --------------------------------------------
# Database (PostgreSQL)
# --------------------------------------------
# Railway auto-sets this when you add PostgreSQL addon
# Format: postgres://user:password@host:port/database
# Example: postgres://postgres:password@containers-us-west-123.railway.app:5432/railway
DATABASE_URL=postgres://user:password@host:5432/database

# --------------------------------------------
# Google Gemini API (FREE Tier Available)
# --------------------------------------------
# Get from: https://makersuite.google.com/app/apikey
# Used for: embeddings, chat generation, and Urdu translation
GOOGLE_API_KEY=your_gemini_api_key_here

# --------------------------------------------
# Application Configuration
# --------------------------------------------
ENV=production
LOG_LEVEL=INFO

# CORS Origins (IMPORTANT: Add your frontend URL)
# Separate multiple origins with commas (no spaces)
# For GitHub Pages: https://hasnaincodehub.github.io
# For local dev: http://localhost:3000
CORS_ORIGINS=https://hasnaincodehub.github.io,http://localhost:3000

# --------------------------------------------
# RAG Configuration (Optional - uses defaults)
# --------------------------------------------
# Gemini text-embedding-004 uses 768 dimensions
EMBEDDING_MODEL=text-embedding-004
EMBEDDING_DIMENSION=768
RETRIEVAL_THRESHOLD=0.7
RETRIEVAL_LIMIT=5

# --------------------------------------------
# Authentication & Security (CRITICAL)
# --------------------------------------------
# Generate a secure random key with:
# python -c "import secrets; print(secrets.token_hex(32))"
# MUST be at least 32 characters for production
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_RANDOM_KEY_MIN_32_CHARS

# JWT Algorithm (do not change unless you know what you're doing)
JWT_ALGORITHM=HS256

# Token expiration in minutes
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================
# RAILWAY-SPECIFIC NOTES
# ============================================
#
# 1. DATABASE_URL: Automatically set by Railway PostgreSQL addon
#    - No need to manually configure
#    - SSL is enabled by default
#
# 2. PORT: Automatically set by Railway (dynamic)
#    - Do not set manually
#    - Application uses $PORT from environment
#
# 3. CORS_ORIGINS: MUST include your GitHub Pages URL
#    - Format: https://username.github.io (no trailing slash)
#    - Can include multiple origins separated by commas
#
# 4. JWT_SECRET: MUST be changed from example value
#    - Generate: python -c "import secrets; print(secrets.token_hex(32))"
#    - Keep this secret and never commit to version control
#
# 5. Environment: Set ENV=production for production deployment
#    - Enables production optimizations
#    - Changes logging behavior
#
# 6. Qdrant: Use Qdrant Cloud (free tier available)
#    - Create cluster at cloud.qdrant.io
#    - Create collection "textbook_chunks" with 768 dimensions
#    - Run seeding script to populate embeddings
#
# ============================================
# INITIAL SETUP CHECKLIST
# ============================================
#
# [ ] Created Qdrant Cloud cluster and got API key
# [ ] Created collection "textbook_chunks" (768 dimensions, cosine distance)
# [ ] Got Gemini API key from Google AI Studio
# [ ] Generated secure JWT_SECRET (32+ characters)
# [ ] Added PostgreSQL addon in Railway
# [ ] Set all environment variables in Railway dashboard
# [ ] Deployed application
# [ ] Ran database migrations (alembic upgrade head)
# [ ] Seeded Qdrant with textbook content
# [ ] Tested health endpoint
# [ ] Tested signup and login
# [ ] Tested chat endpoint
# [ ] Verified CORS works with frontend
